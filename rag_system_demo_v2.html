<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAGç³»ç»Ÿæ·±åº¦è§£æ - äº¤äº’å¼å­¦ä¹ ä½“éªŒ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.95;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 3px solid #e9ecef;
        }

        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1em;
            font-weight: 600;
            position: relative;
        }

        .tab:hover {
            background: #e9ecef;
        }

        .tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
            margin-bottom: -3px;
        }

        .tab-icon {
            font-size: 1.5em;
            margin-right: 10px;
        }

        .content {
            padding: 40px;
            min-height: 600px;
        }

        .stage {
            display: none;
        }

        .stage.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step-container {
            margin-bottom: 30px;
        }

        .step-title {
            font-size: 1.5em;
            color: #667eea;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .step-number {
            background: #667eea;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
        }

        .demo-area {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 30px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        /* æ”¹è¿›çš„ä»£ç å—æ ·å¼ */
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
            white-space: pre;
            line-height: 1.5;
            position: relative;
        }

        .code-block .comment {
            color: #6a9955;
        }

        .code-block .keyword {
            color: #c586c0;
        }

        .code-block .string {
            color: #ce9178;
        }

        .code-block .number {
            color: #b5cea8;
        }

        /* Why-What-How è§£é‡Šæ¡† */
        .explanation-box {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .explanation-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .exp-tab {
            padding: 10px 20px;
            background: #f0f4ff;
            border: 2px solid #667eea;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .exp-tab.active {
            background: #667eea;
            color: white;
        }

        .exp-content {
            display: none;
            animation: fadeIn 0.3s;
        }

        .exp-content.active {
            display: block;
        }

        .exp-content h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .exp-content ul {
            margin-left: 20px;
            line-height: 1.8;
        }

        /* è¯¦ç»†è§£é‡Šå¼¹çª— */
        .detail-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            animation: fadeIn 0.3s;
        }

        .detail-modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 30px;
            cursor: pointer;
            color: #999;
        }

        .modal-close:hover {
            color: #333;
        }

        /* å‘é‡æ˜¾ç¤ºæ”¹è¿› */
        .vector-display {
            background: #1e1e1e;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            font-size: 0.9em;
            position: relative;
            overflow: hidden;
        }

        .vector-row {
            margin: 10px 0;
            opacity: 0;
            animation: fadeInRow 0.5s forwards;
        }

        @keyframes fadeInRow {
            to { opacity: 1; }
        }

        /* æ•°æ®æµåŠ¨ç”» */
        .flow-container {
            position: relative;
            height: 150px;
            margin: 30px 0;
        }

        .flow-node {
            position: absolute;
            background: white;
            border: 3px solid #667eea;
            border-radius: 10px;
            padding: 15px 20px;
            font-weight: 600;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .flow-node.active {
            background: #667eea;
            color: white;
            transform: scale(1.1);
        }

        .flow-arrow {
            position: absolute;
            width: 50px;
            height: 2px;
            background: #667eea;
            top: 50%;
            transform: translateY(-50%);
        }

        .flow-arrow::after {
            content: 'â–¶';
            position: absolute;
            right: -10px;
            top: -8px;
            color: #667eea;
        }

        /* æ¯”è¾ƒè¡¨æ ¼ */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .comparison-table th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: left;
        }

        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid #e9ecef;
        }

        .comparison-table tr:hover {
            background: #f8f9fa;
        }

        /* æ€§èƒ½æŒ‡æ ‡ */
        .metrics-panel {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }

        .metric-card {
            flex: 1;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            margin: 10px 0;
        }

        .metric-label {
            color: #666;
            font-size: 0.9em;
        }

        /* æ§åˆ¶é¢æ¿æ”¹è¿› */
        .control-panel {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .speed-slider {
            width: 150px;
        }

        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .btn:hover {
            background: #5a67d8;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn.secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn.secondary:hover {
            background: #f0f4ff;
        }

        .btn:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
            transform: none;
        }

        /* è¿›åº¦æŒ‡ç¤ºå™¨ */
        .progress-indicator {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            justify-content: center;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #e9ecef;
            transition: all 0.3s;
        }

        .progress-dot.active {
            background: #667eea;
            transform: scale(1.5);
        }

        .progress-dot.completed {
            background: #28a745;
        }

        /* æç¤ºä¿¡æ¯ */
        .info-tip {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .info-tip-icon {
            font-size: 1.5em;
            color: #2196F3;
        }

        .info-tip-content h4 {
            color: #2196F3;
            margin-bottom: 5px;
        }

        /* åˆ†å—å¯è§†åŒ– */
        .chunk-visualization {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
        }

        .chunk-item {
            background: white;
            border: 2px dashed #ffc107;
            border-radius: 8px;
            padding: 15px;
            flex: 0 0 calc(33.333% - 10px);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .chunk-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(255, 193, 7, 0.3);
        }

        .chunk-item.active {
            background: #fff3cd;
            border-color: #28a745;
            border-style: solid;
        }

        .chunk-number {
            position: absolute;
            top: -10px;
            left: 10px;
            background: #ffc107;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9em;
            font-weight: bold;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .chunk-item {
                flex: 0 0 100%;
            }
            
            .control-panel {
                flex-direction: column;
            }
            
            .tabs {
                flex-direction: column;
            }
        }

        /* åŠ è½½åŠ¨ç”» */
        .loader {
            border: 4px solid #f3f3f3;
            border-radius: 50%;
            border-top: 4px solid #667eea;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* é”®ç›˜å¿«æ·é”®æç¤º */
        .keyboard-shortcuts {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 15px;
            border-radius: 10px;
            font-size: 0.9em;
            display: none;
        }

        .keyboard-shortcuts.show {
            display: block;
        }

        .shortcut-item {
            margin: 5px 0;
        }

        .shortcut-key {
            background: #667eea;
            padding: 2px 8px;
            border-radius: 4px;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ RAGç³»ç»Ÿæ·±åº¦è§£æ</h1>
            <p>ä»åŸç†åˆ°å®è·µï¼Œæ·±å…¥ç†è§£æ£€ç´¢å¢å¼ºç”Ÿæˆç³»ç»Ÿ</p>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('dev')">
                <span class="tab-icon">ğŸ› ï¸</span>å¼€å‘æ€
            </div>
            <div class="tab" onclick="switchTab('manage')">
                <span class="tab-icon">ğŸ“‹</span>ç®¡ç†æ€
            </div>
            <div class="tab" onclick="switchTab('runtime')">
                <span class="tab-icon">ğŸš€</span>è¿è¡Œæ€
            </div>
        </div>

        <div class="content">
            <!-- å¼€å‘æ€ -->
            <div id="dev" class="stage active">
                <div class="step-container">
                    <div class="step-title">
                        <div class="step-number">1</div>
                        ç¯å¢ƒé…ç½® - ç³»ç»ŸåŸºç¡€æ­å»º
                    </div>
                    
                    <div class="info-tip">
                        <span class="info-tip-icon">ğŸ’¡</span>
                        <div class="info-tip-content">
                            <h4>ä»€ä¹ˆæ˜¯å¼€å‘æ€ï¼Ÿ</h4>
                            <p>å¼€å‘æ€æ˜¯RAGç³»ç»Ÿçš„æ­å»ºé˜¶æ®µï¼Œå°±åƒå»ºæˆ¿å­è¦å…ˆæ‰“åœ°åŸºã€å‡†å¤‡ææ–™ä¸€æ ·ã€‚æˆ‘ä»¬éœ€è¦é…ç½®å¿…è¦çš„APIå¯†é’¥ã€é€‰æ‹©åˆé€‚çš„æ¨¡å‹ã€è®¾ç½®æ•°æ®åº“è·¯å¾„ç­‰ã€‚</p>
                        </div>
                    </div>

                    <div class="demo-area">
                        <h3>ğŸ“ ç¯å¢ƒé…ç½®æ–‡ä»¶ (.env)</h3>
                        <p style="margin-bottom: 15px;">é¦–å…ˆåˆ›å»ºé…ç½®æ–‡ä»¶ï¼Œè¿™æ˜¯ç³»ç»Ÿçš„"èº«ä»½è¯"å’Œ"è¯´æ˜ä¹¦"</p>
                        
                        <div class="code-block" id="env-config">
<span class="comment"># AIæ¨¡å‹é…ç½®</span>
<span class="keyword">LLM_PROVIDER</span>=<span class="string">deepseek</span>        <span class="comment"># é€‰æ‹©AIæä¾›å•†ï¼ˆdeepseek/claudeï¼‰</span>
<span class="keyword">LLM_API_KEY</span>=<span class="string">sk-xxxxxxxxxxxxxxxx</span>  <span class="comment"># ä½ çš„APIå¯†é’¥ï¼ˆéœ€è¦ç”³è¯·ï¼‰</span>
<span class="keyword">LLM_BASE_URL</span>=<span class="string">https://llm.chutes.ai/v1</span>  <span class="comment"># APIæœåŠ¡åœ°å€</span>

<span class="comment"># åŒæ¨¡å‹é…ç½® - ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªæ¨¡å‹ï¼Ÿ</span>
<span class="keyword">MODEL_REASON</span>=<span class="string">deepseek-ai/DeepSeek-R1</span>    <span class="comment"># æ¨ç†æ¨¡å‹ï¼šæ“…é•¿åˆ†æå’Œè§£é‡Š</span>
<span class="keyword">MODEL_TOOLCALL</span>=<span class="string">deepseek-ai/DeepSeek-V3</span>  <span class="comment"># å·¥å…·æ¨¡å‹ï¼šæ“…é•¿è°ƒç”¨æœç´¢åŠŸèƒ½</span>

<span class="comment"># å‘é‡æ•°æ®åº“é…ç½®</span>
<span class="keyword">CHROMA_PATH</span>=<span class="string">./chroma_db</span>           <span class="comment"># æ•°æ®åº“å­˜å‚¨ä½ç½®</span>
<span class="keyword">EMBEDDING_MODEL</span>=<span class="string">all-MiniLM-L6-v2</span>  <span class="comment"># æ–‡æœ¬è½¬å‘é‡çš„æ¨¡å‹</span>

<span class="comment"># å¤„ç†å‚æ•° - å¦‚ä½•åˆ‡åˆ†æ–‡æ¡£ï¼Ÿ</span>
<span class="keyword">CHUNK_SIZE</span>=<span class="number">500</span>      <span class="comment"># æ¯å—çš„å¤§å°ï¼ˆå­—ç¬¦æ•°ï¼‰</span>
<span class="keyword">CHUNK_OVERLAP</span>=<span class="number">100</span>   <span class="comment"># å—ä¹‹é—´çš„é‡å ï¼ˆä¿æŒä¸Šä¸‹æ–‡ï¼‰</span>
<span class="keyword">MAX_RESULTS</span>=<span class="number">5</span>       <span class="comment"># è¿”å›æœ€ç›¸ä¼¼çš„ç»“æœæ•°</span>
                        </div>
                        
                        <button class="btn secondary" onclick="showConfigDetails()">
                            <span>ğŸ“–</span> æ·±å…¥ç†è§£é…ç½®
                        </button>
                    </div>

                    <div class="demo-area">
                        <h3>ğŸ”§ æ ¸å¿ƒç»„ä»¶åˆå§‹åŒ–</h3>
                        <p style="margin-bottom: 15px;">ä¸‰å¤§æ ¸å¿ƒç»„ä»¶ï¼Œç¼ºä¸€ä¸å¯</p>
                        
                        <!-- Why-What-How è§£é‡Šæ¡† -->
                        <div class="explanation-box">
                            <div class="explanation-tabs">
                                <div class="exp-tab active" onclick="showExplanation('dev-why')">ä¸ºä»€ä¹ˆ (Why)</div>
                                <div class="exp-tab" onclick="showExplanation('dev-what')">æ˜¯ä»€ä¹ˆ (What)</div>
                                <div class="exp-tab" onclick="showExplanation('dev-how')">æ€ä¹ˆåš (How)</div>
                            </div>
                            
                            <div id="dev-why" class="exp-content active">
                                <h4>ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦è¿™äº›ç»„ä»¶ï¼Ÿ</h4>
                                <ul>
                                    <li><strong>å‘é‡æ•°æ®åº“</strong>ï¼šä¼ ç»Ÿæ•°æ®åº“åªèƒ½ç²¾ç¡®åŒ¹é…å…³é”®è¯ï¼Œæ— æ³•ç†è§£"Python"å’Œ"æ´¾æ£®"æ˜¯åŒä¸€ä¸ªä¸œè¥¿ã€‚å‘é‡æ•°æ®åº“å¯ä»¥ç†è§£è¯­ä¹‰ç›¸ä¼¼æ€§ã€‚</li>
                                    <li><strong>åµŒå…¥æ¨¡å‹</strong>ï¼šè®¡ç®—æœºä¸æ‡‚äººç±»è¯­è¨€ï¼Œéœ€è¦è½¬æ¢æˆæ•°å­—ï¼ˆå‘é‡ï¼‰æ‰èƒ½è®¡ç®—ã€‚å°±åƒæŠŠä¸­æ–‡ç¿»è¯‘æˆè®¡ç®—æœºèƒ½æ‡‚çš„"æ•°å­—è¯­è¨€"ã€‚</li>
                                    <li><strong>AIåŒæ¨¡å‹</strong>ï¼šå°±åƒåŒ»é™¢æœ‰ä¸“ç§‘åŒ»ç”Ÿï¼Œä¸åŒæ¨¡å‹æ“…é•¿ä¸åŒä»»åŠ¡ã€‚R1æ“…é•¿æ¨ç†åˆ†æï¼ŒV3æ“…é•¿å·¥å…·è°ƒç”¨ã€‚</li>
                                </ul>
                            </div>
                            
                            <div id="dev-what" class="exp-content">
                                <h4>ğŸ“š è¿™äº›ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
                                <ul>
                                    <li><strong>ChromaDB</strong>ï¼šå¼€æºçš„å‘é‡æ•°æ®åº“ï¼Œå¯ä»¥å­˜å‚¨å’Œå¿«é€Ÿæ£€ç´¢å‘é‡ã€‚æ”¯æŒæŒä¹…åŒ–å­˜å‚¨ï¼Œé‡å¯ä¸ä¸¢å¤±æ•°æ®ã€‚</li>
                                    <li><strong>MiniLM-L6</strong>ï¼šè½»é‡çº§è¯­è¨€æ¨¡å‹ï¼ˆ25MBï¼‰ï¼Œå°†æ–‡æœ¬è½¬æ¢ä¸º384ç»´å‘é‡ã€‚æ”¯æŒå¤šè¯­è¨€ï¼Œé€Ÿåº¦å¿«ã€‚</li>
                                    <li><strong>DeepSeekåŒæ¨¡å‹</strong>ï¼š
                                        <ul>
                                            <li>R1ï¼šæ·±åº¦æ¨ç†æ¨¡å‹ï¼Œé€‚åˆå¤æ‚åˆ†æ</li>
                                            <li>V3ï¼šå·¥å…·è°ƒç”¨æ¨¡å‹ï¼Œé€‚åˆæ‰§è¡Œæœç´¢ç­‰åŠŸèƒ½</li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                            
                            <div id="dev-how" class="exp-content">
                                <h4>ğŸ› ï¸ å¦‚ä½•å·¥ä½œï¼Ÿ</h4>
                                <div class="code-block">
<span class="comment"># 1. åˆå§‹åŒ–å‘é‡æ•°æ®åº“</span>
vector_store = VectorStore(
    chroma_path=<span class="string">"./chroma_db"</span>,
    embedding_model=<span class="string">"all-MiniLM-L6-v2"</span>
)

<span class="comment"># 2. åˆå§‹åŒ–AIç”Ÿæˆå™¨</span>
ai_generator = AIGenerator(
    api_key=config.LLM_API_KEY,
    model=config.MODEL_REASON
)

<span class="comment"># 3. åˆå§‹åŒ–è·¯ç”±å™¨</span>
router = LLMRouter()
<span class="keyword">if</span> <span class="string">"æœç´¢"</span> <span class="keyword">in</span> query:
    model = router.select_model(<span class="string">"tool_call"</span>)  <span class="comment"># é€‰æ‹©V3</span>
<span class="keyword">else</span>:
    model = router.select_model(<span class="string">"reasoning"</span>)  <span class="comment"># é€‰æ‹©R1</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ç»„ä»¶åˆå§‹åŒ–å¯è§†åŒ– -->
                        <div class="flow-container">
                            <div class="flow-node" id="node-vector" style="left: 0; top: 50px;">
                                ğŸ’¾ å‘é‡æ•°æ®åº“
                            </div>
                            <div class="flow-arrow" style="left: 180px; top: 73px;"></div>
                            
                            <div class="flow-node" id="node-embed" style="left: 250px; top: 50px;">
                                ğŸ”¢ åµŒå…¥æ¨¡å‹
                            </div>
                            <div class="flow-arrow" style="left: 410px; top: 73px;"></div>
                            
                            <div class="flow-node" id="node-ai" style="left: 480px; top: 50px;">
                                ğŸ¤– AIåŒæ¨¡å‹
                            </div>
                        </div>
                        
                        <button class="btn" onclick="initComponents()">
                            <span>ğŸš€</span> åˆå§‹åŒ–ç»„ä»¶
                        </button>
                    </div>
                </div>
            </div>

            <!-- ç®¡ç†æ€ -->
            <div id="manage" class="stage">
                <div class="step-container">
                    <div class="step-title">
                        <div class="step-number">2</div>
                        æ–‡æ¡£å¤„ç† - çŸ¥è¯†åº“æ„å»º
                    </div>

                    <div class="info-tip">
                        <span class="info-tip-icon">ğŸ’¡</span>
                        <div class="info-tip-content">
                            <h4>ä»€ä¹ˆæ˜¯ç®¡ç†æ€ï¼Ÿ</h4>
                            <p>ç®¡ç†æ€æ˜¯å‡†å¤‡å’Œå¯¼å…¥è¯¾ç¨‹å†…å®¹çš„é˜¶æ®µã€‚å°±åƒå›¾ä¹¦ç®¡ç†å‘˜è¦ç»™æ–°ä¹¦ç¼–ç›®ã€è´´æ ‡ç­¾ã€åˆ†ç±»ä¸Šæ¶ä¸€æ ·ï¼Œæˆ‘ä»¬è¦æŠŠæ–‡æ¡£å¤„ç†æˆç³»ç»Ÿèƒ½ç†è§£çš„æ ¼å¼ã€‚</p>
                        </div>
                    </div>

                    <div class="demo-area">
                        <h3>ğŸ“„ è¯¾ç¨‹æ–‡æ¡£æ ¼å¼è§„èŒƒ</h3>
                        <div class="code-block">
Course Title: Pythonç¼–ç¨‹åŸºç¡€
Course Link: https://example.com/python
Course Instructor: å¼ è€å¸ˆ

Lesson 0: Pythonç®€ä»‹
Pythonæ˜¯ä¸€ç§é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œä»¥å…¶ç®€æ´å’Œæ˜“è¯»æ€§è‘—ç§°ã€‚
å®ƒè¢«å¹¿æ³›åº”ç”¨äºWebå¼€å‘ã€æ•°æ®ç§‘å­¦ã€äººå·¥æ™ºèƒ½ç­‰é¢†åŸŸã€‚

Lesson 1: å˜é‡å’Œæ•°æ®ç±»å‹
åœ¨Pythonä¸­ï¼Œå˜é‡æ˜¯å­˜å‚¨æ•°æ®çš„å®¹å™¨ã€‚
åŸºæœ¬æ•°æ®ç±»å‹åŒ…æ‹¬ï¼šæ•´æ•°(int)ã€æµ®ç‚¹æ•°(float)ã€å­—ç¬¦ä¸²(str)ã€å¸ƒå°”å€¼(bool)ã€‚
                        </div>
                    </div>

                    <div class="demo-area">
                        <h3>âœ‚ï¸ æ™ºèƒ½åˆ†å—å¤„ç†</h3>
                        
                        <div class="info-tip">
                            <span class="info-tip-icon">ğŸ•</span>
                            <div class="info-tip-content">
                                <h4>ä¸ºä»€ä¹ˆè¦åˆ†å—ï¼Ÿ</h4>
                                <p>å°±åƒåƒæŠ«è¨è¦åˆ‡æˆå°å—ä¸€æ ·ï¼Œå¤§æ–‡æ¡£éœ€è¦åˆ‡åˆ†æˆå°å—æ‰èƒ½æœ‰æ•ˆå¤„ç†ã€‚æ¯å—ä¿æŒè¯­ä¹‰å®Œæ•´æ€§ï¼ŒåŒæ—¶æ§åˆ¶å¤§å°ä»¥æé«˜æœç´¢ç²¾åº¦ã€‚</p>
                            </div>
                        </div>
                        
                        <div class="chunk-visualization" id="chunks-display">
                            <!-- åˆ†å—å°†åŠ¨æ€ç”Ÿæˆ -->
                        </div>
                        
                        <button class="btn" onclick="demonstrateChunking()">
                            <span>âœ‚ï¸</span> æ¼”ç¤ºåˆ†å—è¿‡ç¨‹
                        </button>
                    </div>

                    <div class="demo-area">
                        <h3>ğŸ”¢ å‘é‡åŒ–å¤„ç†</h3>
                        
                        <div class="explanation-box">
                            <div class="explanation-tabs">
                                <div class="exp-tab active" onclick="showExplanation('vec-why')">ä¸ºä»€ä¹ˆ</div>
                                <div class="exp-tab" onclick="showExplanation('vec-what')">æ˜¯ä»€ä¹ˆ</div>
                                <div class="exp-tab" onclick="showExplanation('vec-how')">æ€ä¹ˆåš</div>
                            </div>
                            
                            <div id="vec-why" class="exp-content active">
                                <h4>ğŸ¤” ä¸ºä»€ä¹ˆè¦å‘é‡åŒ–ï¼Ÿ</h4>
                                <p>æ–‡æœ¬å¯¹è®¡ç®—æœºæ¥è¯´åªæ˜¯ç¬¦å·ï¼Œæ²¡æœ‰æ„ä¹‰ã€‚å‘é‡åŒ–å°†æ–‡æœ¬è½¬æ¢ä¸ºæ•°å­—ï¼Œè¿™æ ·ï¼š</p>
                                <ul>
                                    <li>å¯ä»¥è®¡ç®—æ–‡æœ¬ä¹‹é—´çš„ç›¸ä¼¼åº¦</li>
                                    <li>è¯­ä¹‰ç›¸è¿‘çš„æ–‡æœ¬ï¼Œå‘é‡ä¹Ÿç›¸è¿‘</li>
                                    <li>å®ç°"ç†è§£"è€Œéç®€å•åŒ¹é…</li>
                                </ul>
                            </div>
                            
                            <div id="vec-what" class="exp-content">
                                <h4>ğŸ“Š å‘é‡æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
                                <p>å‘é‡æ˜¯ä¸€ç»„æ•°å­—ï¼Œä»£è¡¨æ–‡æœ¬åœ¨å¤šç»´ç©ºé—´ä¸­çš„ä½ç½®ï¼š</p>
                                <div class="code-block">
<span class="comment"># æ–‡æœ¬</span>
text1 = <span class="string">"Pythonç¼–ç¨‹"</span>
text2 = <span class="string">"Pythonå¼€å‘"</span>
text3 = <span class="string">"Javaç¼–ç¨‹"</span>

<span class="comment"># å¯¹åº”çš„å‘é‡ï¼ˆç®€åŒ–ç¤ºä¾‹ï¼‰</span>
vec1 = [<span class="number">0.8</span>, <span class="number">0.6</span>, <span class="number">0.2</span>]  <span class="comment"># Pythonç¼–ç¨‹</span>
vec2 = [<span class="number">0.85</span>, <span class="number">0.55</span>, <span class="number">0.25</span>]  <span class="comment"># Pythonå¼€å‘ï¼ˆå¾ˆç›¸ä¼¼ï¼‰</span>
vec3 = [<span class="number">0.3</span>, <span class="number">0.7</span>, <span class="number">0.9</span>]  <span class="comment"># Javaç¼–ç¨‹ï¼ˆå·®å¼‚è¾ƒå¤§ï¼‰</span>
                                </div>
                            </div>
                            
                            <div id="vec-how" class="exp-content">
                                <h4>ğŸ”§ å¦‚ä½•è®¡ç®—ç›¸ä¼¼åº¦ï¼Ÿ</h4>
                                <p>ä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦å…¬å¼ï¼š</p>
                                <div style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
                                    <strong>ç›¸ä¼¼åº¦ = cos(Î¸) = (AÂ·B) / (|A| Ã— |B|)</strong>
                                    <br><br>
                                    å€¼åŸŸï¼š[-1, 1]<br>
                                    - 1 = å®Œå…¨ç›¸åŒ<br>
                                    - 0 = æ— å…³<br>
                                    - -1 = å®Œå…¨ç›¸å
                                </div>
                            </div>
                        </div>
                        
                        <div class="vector-display" id="vector-display">
                            <!-- å‘é‡åŠ¨ç”»å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                        </div>
                        
                        <button class="btn" onclick="demonstrateVectorization()">
                            <span>ğŸ”¢</span> æ¼”ç¤ºå‘é‡åŒ–
                        </button>
                    </div>
                </div>
            </div>

            <!-- è¿è¡Œæ€ -->
            <div id="runtime" class="stage">
                <div class="step-container">
                    <div class="step-title">
                        <div class="step-number">3</div>
                        æŸ¥è¯¢å¤„ç† - æ™ºèƒ½é—®ç­”
                    </div>

                    <div class="info-tip">
                        <span class="info-tip-icon">ğŸ’¡</span>
                        <div class="info-tip-content">
                            <h4>ä»€ä¹ˆæ˜¯è¿è¡Œæ€ï¼Ÿ</h4>
                            <p>è¿è¡Œæ€æ˜¯ç³»ç»Ÿæä¾›æœåŠ¡çš„é˜¶æ®µã€‚ç”¨æˆ·æå‡ºé—®é¢˜ï¼Œç³»ç»Ÿç†è§£é—®é¢˜ã€æœç´¢ç›¸å…³å†…å®¹ã€ç”Ÿæˆå‡†ç¡®ç­”æ¡ˆã€‚æ•´ä¸ªè¿‡ç¨‹å°±åƒä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹åœ¨å¸®ä½ æŸ¥æ‰¾å’Œæ€»ç»“ä¿¡æ¯ã€‚</p>
                        </div>
                    </div>

                    <div class="demo-area">
                        <h3>ğŸ” æ™ºèƒ½æŸ¥è¯¢æµç¨‹</h3>
                        
                        <!-- è¿›åº¦æŒ‡ç¤ºå™¨ -->
                        <div class="progress-indicator">
                            <div class="progress-dot active" id="step1-dot"></div>
                            <div class="progress-dot" id="step2-dot"></div>
                            <div class="progress-dot" id="step3-dot"></div>
                            <div class="progress-dot" id="step4-dot"></div>
                            <div class="progress-dot" id="step5-dot"></div>
                        </div>
                        
                        <div style="display: flex; gap: 10px; margin: 20px 0;">
                            <input type="text" id="user-query" value="Pythonçš„åŸºæœ¬æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿ" 
                                   style="flex: 1; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 1.1em;">
                            <button class="btn" onclick="processFullQuery()">
                                <span>ğŸ”</span> å¤„ç†æŸ¥è¯¢
                            </button>
                        </div>
                    </div>

                    <!-- å¯¹æ¯”å±•ç¤º -->
                    <div class="demo-area">
                        <h3>ğŸ“Š RAG vs ä¼ ç»Ÿæœç´¢ å¯¹æ¯”</h3>
                        
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>ç‰¹æ€§</th>
                                    <th>ä¼ ç»Ÿå…³é”®è¯æœç´¢</th>
                                    <th>RAGè¯­ä¹‰æœç´¢</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>æœç´¢æ–¹å¼</td>
                                    <td>ç²¾ç¡®åŒ¹é…å…³é”®è¯</td>
                                    <td>ç†è§£è¯­ä¹‰ç›¸ä¼¼æ€§</td>
                                </tr>
                                <tr>
                                    <td>ç¤ºä¾‹æŸ¥è¯¢</td>
                                    <td>æœ"Python"æ‰¾ä¸åˆ°"æ´¾æ£®"</td>
                                    <td>ç†è§£"Python"="æ´¾æ£®"</td>
                                </tr>
                                <tr>
                                    <td>ä¸Šä¸‹æ–‡ç†è§£</td>
                                    <td>âŒ æ— </td>
                                    <td>âœ… ç†è§£ä¸Šä¸‹æ–‡</td>
                                </tr>
                                <tr>
                                    <td>ç­”æ¡ˆç”Ÿæˆ</td>
                                    <td>è¿”å›åŸæ–‡</td>
                                    <td>ç”Ÿæˆæ€»ç»“æ€§ç­”æ¡ˆ</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- æ€§èƒ½æŒ‡æ ‡ -->
                    <div class="demo-area">
                        <h3>ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡</h3>
                        
                        <div class="metrics-panel">
                            <div class="metric-card">
                                <div class="metric-label">å¤„ç†æ—¶é—´</div>
                                <div class="metric-value" id="time-metric">0.0s</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">Tokenæ¶ˆè€—</div>
                                <div class="metric-value" id="token-metric">0</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">ç›¸ä¼¼åº¦å¾—åˆ†</div>
                                <div class="metric-value" id="similarity-metric">0.00</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">æˆæœ¬ä¼°ç®—</div>
                                <div class="metric-value" id="cost-metric">$0.00</div>
                            </div>
                        </div>
                    </div>

                    <!-- æœ€ç»ˆç­”æ¡ˆ -->
                    <div class="demo-area" style="background: #d4edda;">
                        <h3>âœ… AIç”Ÿæˆç­”æ¡ˆ</h3>
                        <div id="final-answer" style="font-size: 1.1em; line-height: 1.8; padding: 20px; background: white; border-radius: 10px; margin-top: 15px;">
                            <!-- ç­”æ¡ˆå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å¢å¼ºçš„æ§åˆ¶é¢æ¿ -->
        <div class="control-panel">
            <div>
                <button class="btn secondary" onclick="resetDemo()">
                    <span>ğŸ”„</span> é‡ç½®
                </button>
                <button class="btn secondary" onclick="toggleShortcuts()">
                    <span>âŒ¨ï¸</span> å¿«æ·é”®
                </button>
            </div>
            
            <div class="speed-control">
                <label>æ’­æ”¾é€Ÿåº¦ï¼š</label>
                <input type="range" class="speed-slider" id="speed-slider" 
                       min="0.5" max="2" step="0.5" value="1">
                <span id="speed-label">1.0x</span>
            </div>
            
            <div>
                <button class="btn" onclick="autoPlay()">
                    <span id="play-icon">â–¶ï¸</span> <span id="play-text">è‡ªåŠ¨æ’­æ”¾</span>
                </button>
            </div>
        </div>
    </div>

    <!-- è¯¦ç»†è§£é‡Šå¼¹çª— -->
    <div class="detail-modal" id="detail-modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal()">&times;</span>
            <div id="modal-body">
                <!-- åŠ¨æ€å†…å®¹ -->
            </div>
        </div>
    </div>

    <!-- é”®ç›˜å¿«æ·é”®æç¤º -->
    <div class="keyboard-shortcuts" id="shortcuts">
        <h4>âŒ¨ï¸ é”®ç›˜å¿«æ·é”®</h4>
        <div class="shortcut-item">
            <span class="shortcut-key">Space</span> æš‚åœ/ç»§ç»­
        </div>
        <div class="shortcut-item">
            <span class="shortcut-key">â†/â†’</span> åˆ‡æ¢æ ‡ç­¾
        </div>
        <div class="shortcut-item">
            <span class="shortcut-key">R</span> é‡ç½®æ¼”ç¤º
        </div>
        <div class="shortcut-item">
            <span class="shortcut-key">?</span> æ˜¾ç¤º/éšè—å¿«æ·é”®
        </div>
    </div>

    <script>
        // å…¨å±€çŠ¶æ€ç®¡ç†
        let currentTab = 'dev';
        let isPlaying = false;
        let playbackSpeed = 1.0;
        let animationTimeouts = [];

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            // è®¾ç½®é€Ÿåº¦æ»‘å—ç›‘å¬
            const speedSlider = document.getElementById('speed-slider');
            speedSlider.addEventListener('input', (e) => {
                playbackSpeed = parseFloat(e.target.value);
                document.getElementById('speed-label').textContent = playbackSpeed + 'x';
            });

            // é”®ç›˜å¿«æ·é”®
            document.addEventListener('keydown', handleKeyPress);
        });

        // é”®ç›˜äº‹ä»¶å¤„ç†
        function handleKeyPress(e) {
            switch(e.key) {
                case ' ':
                    e.preventDefault();
                    autoPlay();
                    break;
                case 'ArrowLeft':
                    switchToPrevTab();
                    break;
                case 'ArrowRight':
                    switchToNextTab();
                    break;
                case 'r':
                case 'R':
                    resetDemo();
                    break;
                case '?':
                    toggleShortcuts();
                    break;
            }
        }

        // åˆ‡æ¢æ ‡ç­¾é¡µ
        function switchTab(tab) {
            currentTab = tab;
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.stage').forEach(s => s.classList.remove('active'));
            
            const tabs = ['dev', 'manage', 'runtime'];
            const index = tabs.indexOf(tab);
            document.querySelectorAll('.tab')[index].classList.add('active');
            document.getElementById(tab).classList.add('active');
        }

        function switchToPrevTab() {
            const tabs = ['dev', 'manage', 'runtime'];
            const currentIndex = tabs.indexOf(currentTab);
            if (currentIndex > 0) {
                switchTab(tabs[currentIndex - 1]);
            }
        }

        function switchToNextTab() {
            const tabs = ['dev', 'manage', 'runtime'];
            const currentIndex = tabs.indexOf(currentTab);
            if (currentIndex < tabs.length - 1) {
                switchTab(tabs[currentIndex + 1]);
            }
        }

        // æ˜¾ç¤ºé…ç½®è¯¦æƒ…
        function showConfigDetails() {
            const modalBody = document.getElementById('modal-body');
            modalBody.innerHTML = `
                <h2>ğŸ”§ æ·±å…¥ç†è§£ç¯å¢ƒé…ç½®</h2>
                
                <h3>APIå¯†é’¥è·å–</h3>
                <ol>
                    <li>è®¿é—® DeepSeek å®˜ç½‘æ³¨å†Œè´¦å·</li>
                    <li>åœ¨æ§åˆ¶å°åˆ›å»º API Key</li>
                    <li>å¤åˆ¶å¯†é’¥åˆ° .env æ–‡ä»¶</li>
                </ol>
                
                <h3>åŒæ¨¡å‹æ¶æ„ä¼˜åŠ¿</h3>
                <ul>
                    <li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šä¸åŒä»»åŠ¡ç”¨æœ€é€‚åˆçš„æ¨¡å‹</li>
                    <li><strong>æˆæœ¬æ§åˆ¶</strong>ï¼šæŒ‰éœ€é€‰æ‹©ï¼Œé¿å…æµªè´¹</li>
                    <li><strong>å‡†ç¡®åº¦æå‡</strong>ï¼šä¸“é—¨æ¨¡å‹ä¸“é—¨ä»»åŠ¡</li>
                </ul>
                
                <h3>å‚æ•°è°ƒä¼˜å»ºè®®</h3>
                <div class="code-block">
<span class="comment"># ä¸­æ–‡å†…å®¹ä¼˜åŒ–</span>
CHUNK_SIZE=<span class="number">300</span>      <span class="comment"># ä¸­æ–‡ä¿¡æ¯å¯†åº¦é«˜ï¼Œå¯ä»¥å°ä¸€äº›</span>
CHUNK_OVERLAP=<span class="number">50</span>    <span class="comment"># ä¸­æ–‡å¥å­è¾¹ç•Œæ¸…æ™°</span>

<span class="comment"># è‹±æ–‡å†…å®¹ä¼˜åŒ–</span>
CHUNK_SIZE=<span class="number">500</span>      <span class="comment"># è‹±æ–‡éœ€è¦æ›´å¤šä¸Šä¸‹æ–‡</span>
CHUNK_OVERLAP=<span class="number">100</span>   <span class="comment"># ä¿æŒå¥å­å®Œæ•´æ€§</span>
                </div>
            `;
            
            document.getElementById('detail-modal').classList.add('show');
        }

        // æ˜¾ç¤ºè§£é‡Šå†…å®¹
        function showExplanation(id) {
            const prefix = id.split('-')[0];
            document.querySelectorAll(`#${prefix}-why, #${prefix}-what, #${prefix}-how`).forEach(el => {
                el.classList.remove('active');
            });
            document.getElementById(id).classList.add('active');
            
            // æ›´æ–°æ ‡ç­¾çŠ¶æ€
            const tabs = event.target.parentElement.children;
            for (let tab of tabs) {
                tab.classList.remove('active');
            }
            event.target.classList.add('active');
        }

        // åˆå§‹åŒ–ç»„ä»¶åŠ¨ç”»
        function initComponents() {
            const nodes = ['node-vector', 'node-embed', 'node-ai'];
            let index = 0;
            
            function activateNext() {
                if (index < nodes.length) {
                    document.getElementById(nodes[index]).classList.add('active');
                    index++;
                    setTimeout(activateNext, 800 / playbackSpeed);
                }
            }
            
            activateNext();
        }

        // æ¼”ç¤ºåˆ†å—è¿‡ç¨‹
        function demonstrateChunking() {
            const container = document.getElementById('chunks-display');
            container.innerHTML = '';
            
            const chunks = [
                "Course Title: Pythonç¼–ç¨‹åŸºç¡€\nCourse Link: https://example.com/python\nCourse Instructor: å¼ è€å¸ˆ",
                "Lesson 0: Pythonç®€ä»‹\nPythonæ˜¯ä¸€ç§é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œä»¥å…¶ç®€æ´å’Œæ˜“è¯»æ€§è‘—ç§°ã€‚",
                "å®ƒè¢«å¹¿æ³›åº”ç”¨äºWebå¼€å‘ã€æ•°æ®ç§‘å­¦ã€äººå·¥æ™ºèƒ½ç­‰é¢†åŸŸã€‚",
                "Lesson 1: å˜é‡å’Œæ•°æ®ç±»å‹\nåœ¨Pythonä¸­ï¼Œå˜é‡æ˜¯å­˜å‚¨æ•°æ®çš„å®¹å™¨ã€‚",
                "åŸºæœ¬æ•°æ®ç±»å‹åŒ…æ‹¬ï¼šæ•´æ•°(int)ã€æµ®ç‚¹æ•°(float)ã€å­—ç¬¦ä¸²(str)ã€å¸ƒå°”å€¼(bool)ã€‚"
            ];
            
            chunks.forEach((chunk, index) => {
                setTimeout(() => {
                    const div = document.createElement('div');
                    div.className = 'chunk-item';
                    div.innerHTML = `
                        <div class="chunk-number">å— ${index + 1}</div>
                        <div style="font-size: 0.9em; color: #666;">
                            ${chunk.substring(0, 50)}${chunk.length > 50 ? '...' : ''}
                        </div>
                        <div style="margin-top: 10px; font-size: 0.8em; color: #999;">
                            é•¿åº¦: ${chunk.length} å­—ç¬¦
                        </div>
                    `;
                    div.onclick = () => {
                        document.querySelectorAll('.chunk-item').forEach(c => c.classList.remove('active'));
                        div.classList.add('active');
                    };
                    container.appendChild(div);
                }, index * 300 / playbackSpeed);
            });
        }

        // æ¼”ç¤ºå‘é‡åŒ–è¿‡ç¨‹
        function demonstrateVectorization() {
            const display = document.getElementById('vector-display');
            display.innerHTML = '<div style="color: #00ff00;">æ­£åœ¨ç”Ÿæˆå‘é‡...</div>';
            
            setTimeout(() => {
                const vectors = [
                    { text: "Pythonç¼–ç¨‹åŸºç¡€", vec: [0.234, -0.456, 0.789, 0.123, -0.567] },
                    { text: "é«˜çº§ç¼–ç¨‹è¯­è¨€", vec: [0.345, -0.234, 0.678, 0.234, -0.456] },
                    { text: "å˜é‡å’Œæ•°æ®ç±»å‹", vec: [0.456, -0.123, 0.567, 0.345, -0.234] }
                ];
                
                display.innerHTML = '';
                vectors.forEach((item, index) => {
                    setTimeout(() => {
                        const row = document.createElement('div');
                        row.className = 'vector-row';
                        row.style.animationDelay = `${index * 0.2}s`;
                        row.innerHTML = `
                            <strong style="color: #4fc3f7;">"${item.text}"</strong><br>
                            <span style="color: #00ff00;">â†’ [${item.vec.map(v => v.toFixed(3)).join(', ')}...]</span>
                        `;
                        display.appendChild(row);
                    }, index * 500 / playbackSpeed);
                });
            }, 1000 / playbackSpeed);
        }

        // å¤„ç†å®Œæ•´æŸ¥è¯¢æµç¨‹
        function processFullQuery() {
            const query = document.getElementById('user-query').value;
            const steps = ['step1-dot', 'step2-dot', 'step3-dot', 'step4-dot', 'step5-dot'];
            
            // é‡ç½®æ‰€æœ‰æ­¥éª¤
            steps.forEach(step => {
                document.getElementById(step).classList.remove('active', 'completed');
            });
            
            // é€æ­¥æ‰§è¡Œ
            let currentStep = 0;
            
            function executeStep() {
                if (currentStep < steps.length) {
                    const dot = document.getElementById(steps[currentStep]);
                    dot.classList.add('active');
                    
                    // æ›´æ–°æ€§èƒ½æŒ‡æ ‡
                    updateMetrics(currentStep);
                    
                    setTimeout(() => {
                        dot.classList.remove('active');
                        dot.classList.add('completed');
                        currentStep++;
                        executeStep();
                    }, 1000 / playbackSpeed);
                } else {
                    // æ˜¾ç¤ºæœ€ç»ˆç­”æ¡ˆ
                    showFinalAnswer();
                }
            }
            
            executeStep();
        }

        // æ›´æ–°æ€§èƒ½æŒ‡æ ‡
        function updateMetrics(step) {
            const metrics = {
                time: document.getElementById('time-metric'),
                token: document.getElementById('token-metric'),
                similarity: document.getElementById('similarity-metric'),
                cost: document.getElementById('cost-metric')
            };
            
            // æ¨¡æ‹Ÿé€æ­¥æ›´æ–°
            const values = [
                { time: 0.3, token: 50, similarity: 0.0, cost: 0.001 },
                { time: 0.8, token: 100, similarity: 0.92, cost: 0.002 },
                { time: 1.2, token: 150, similarity: 0.92, cost: 0.003 },
                { time: 1.8, token: 200, similarity: 0.92, cost: 0.004 },
                { time: 2.3, token: 250, similarity: 0.92, cost: 0.005 }
            ];
            
            if (step < values.length) {
                const v = values[step];
                metrics.time.textContent = v.time + 's';
                metrics.token.textContent = v.token;
                metrics.similarity.textContent = v.similarity.toFixed(2);
                metrics.cost.textContent = '$' + v.cost.toFixed(3);
            }
        }

        // æ˜¾ç¤ºæœ€ç»ˆç­”æ¡ˆ
        function showFinalAnswer() {
            const answer = `æ ¹æ®è¯¾ç¨‹å†…å®¹ï¼ŒPythonçš„åŸºæœ¬æ•°æ®ç±»å‹åŒ…æ‹¬ï¼š

<strong>1. æ•´æ•° (int)</strong>
   - è¡¨ç¤ºæ•´æ•°å€¼ï¼Œå¦‚ï¼š42, -10, 0
   - æ”¯æŒä»»æ„ç²¾åº¦

<strong>2. æµ®ç‚¹æ•° (float)</strong>
   - è¡¨ç¤ºå°æ•°ï¼Œå¦‚ï¼š3.14, -0.5, 2.0
   - ä½¿ç”¨åŒç²¾åº¦å­˜å‚¨

<strong>3. å­—ç¬¦ä¸² (str)</strong>
   - è¡¨ç¤ºæ–‡æœ¬ï¼Œå¦‚ï¼š"Hello", 'Python'
   - æ”¯æŒUnicodeå­—ç¬¦

<strong>4. å¸ƒå°”å€¼ (bool)</strong>
   - è¡¨ç¤ºçœŸå‡ï¼Œåªæœ‰ True å’Œ False
   - å¸¸ç”¨äºæ¡ä»¶åˆ¤æ–­

<div style="margin-top: 20px; padding-top: 20px; border-top: 2px solid #e9ecef;">
    <small style="color: #666;">
        ğŸ“š æ¥æºï¼šPythonç¼–ç¨‹åŸºç¡€ - Lesson 1<br>
        ğŸ¤– æ¨¡å‹ï¼šDeepSeek-V3 (å·¥å…·è°ƒç”¨) + DeepSeek-R1 (ç”Ÿæˆ)<br>
        â±ï¸ æ€»è€—æ—¶ï¼š2.3ç§’ | ğŸ’° æˆæœ¬ï¼š$0.005
    </small>
</div>`;
            
            document.getElementById('final-answer').innerHTML = answer;
        }

        // è‡ªåŠ¨æ’­æ”¾
        function autoPlay() {
            isPlaying = !isPlaying;
            const playIcon = document.getElementById('play-icon');
            const playText = document.getElementById('play-text');
            
            if (isPlaying) {
                playIcon.textContent = 'â¸ï¸';
                playText.textContent = 'æš‚åœ';
                startAutoPlay();
            } else {
                playIcon.textContent = 'â–¶ï¸';
                playText.textContent = 'è‡ªåŠ¨æ’­æ”¾';
                stopAutoPlay();
            }
        }

        function startAutoPlay() {
            // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
            animationTimeouts.forEach(timeout => clearTimeout(timeout));
            animationTimeouts = [];
            
            // è‡ªåŠ¨æ‰§è¡Œæ¼”ç¤º
            const demos = [
                { tab: 'dev', func: initComponents, delay: 3000 },
                { tab: 'manage', func: demonstrateChunking, delay: 3000 },
                { tab: 'manage', func: demonstrateVectorization, delay: 3000 },
                { tab: 'runtime', func: processFullQuery, delay: 2000 }
            ];
            
            let currentDemo = 0;
            
            function playNext() {
                if (!isPlaying || currentDemo >= demos.length) {
                    isPlaying = false;
                    document.getElementById('play-icon').textContent = 'â–¶ï¸';
                    document.getElementById('play-text').textContent = 'è‡ªåŠ¨æ’­æ”¾';
                    return;
                }
                
                const demo = demos[currentDemo];
                switchTab(demo.tab);
                
                const timeout = setTimeout(() => {
                    demo.func();
                    currentDemo++;
                    
                    const nextTimeout = setTimeout(playNext, demo.delay / playbackSpeed);
                    animationTimeouts.push(nextTimeout);
                }, 500 / playbackSpeed);
                
                animationTimeouts.push(timeout);
            }
            
            playNext();
        }

        function stopAutoPlay() {
            animationTimeouts.forEach(timeout => clearTimeout(timeout));
            animationTimeouts = [];
        }

        // é‡ç½®æ¼”ç¤º
        function resetDemo() {
            stopAutoPlay();
            location.reload();
        }

        // æ˜¾ç¤º/éšè—å¿«æ·é”®
        function toggleShortcuts() {
            const shortcuts = document.getElementById('shortcuts');
            shortcuts.classList.toggle('show');
        }

        // å…³é—­å¼¹çª—
        function closeModal() {
            document.getElementById('detail-modal').classList.remove('show');
        }

        // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
        document.getElementById('detail-modal').addEventListener('click', (e) => {
            if (e.target.id === 'detail-modal') {
                closeModal();
            }
        });
    </script>
</body>
</html>