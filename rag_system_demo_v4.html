<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAGç³»ç»ŸV2.0æ¶æ„ - æ·±åº¦äº¤äº’å¼å­¦ä¹ å¹³å°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            animation: fadeInDown 0.8s;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.95;
        }

        .header .features {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            gap: 30px;
            font-size: 0.95em;
        }

        .header .features span {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ä¸»å¸ƒå±€ï¼šå·¦ä¾§æ§åˆ¶é¢æ¿ï¼Œä¸­é—´æµç¨‹å›¾ï¼Œå³ä¾§ä¿¡æ¯é¢æ¿ */
        .main-layout {
            display: grid;
            grid-template-columns: 320px 1fr 400px;
            gap: 20px;
            margin-bottom: 30px;
        }

        /* å·¦ä¾§æ§åˆ¶é¢æ¿ */
        .control-panel {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            max-height: 85vh;
            overflow-y: auto;
        }

        .control-section {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e0e0e0;
        }

        .control-section:last-child {
            border-bottom: none;
        }

        .control-section h3 {
            color: #2a5298;
            margin-bottom: 15px;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .mode-selector {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .mode-btn {
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            font-size: 0.95em;
        }

        .mode-btn:hover {
            border-color: #2a5298;
            transform: translateX(5px);
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }

        .mode-btn .subtitle {
            font-size: 0.8em;
            opacity: 0.8;
            margin-top: 4px;
        }

        /* æ·±åº¦å­¦ä¹ å¡ç‰‡ */
        .learning-card {
            background: linear-gradient(135deg, #f0f4ff 0%, #e8eeff 100%);
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
        }

        .learning-card h4 {
            color: #2a5298;
            margin-bottom: 10px;
            font-size: 1.05em;
        }

        .concept-box {
            background: white;
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #667eea;
        }

        .concept-box strong {
            color: #667eea;
            display: block;
            margin-bottom: 5px;
        }

        /* ä¸­é—´æµç¨‹å¯è§†åŒ–åŒºåŸŸ */
        .flow-visualization {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
            min-height: 85vh;
        }

        .stage-title {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.2em;
            font-weight: 600;
        }

        /* èŠ‚ç‚¹æ ·å¼ */
        .flow-node {
            fill: #f0f4ff;
            stroke: #667eea;
            stroke-width: 2;
            cursor: pointer;
            transition: all 0.3s;
        }

        .flow-node:hover {
            fill: #e8eeff;
            stroke-width: 3;
            filter: drop-shadow(0 0 10px rgba(102, 126, 234, 0.3));
        }

        .flow-node.active {
            fill: #667eea;
            stroke-width: 3;
            filter: drop-shadow(0 0 10px rgba(102, 126, 234, 0.5));
        }

        .flow-node.completed {
            fill: #d4edda;
            stroke: #28a745;
        }

        .flow-node.clickable {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .node-text {
            fill: #333;
            font-size: 12px;
            text-anchor: middle;
            pointer-events: none;
        }

        .node-text.active {
            fill: white;
            font-weight: bold;
        }

        /* ç®¡é“è¿çº¿ */
        .pipeline-path {
            fill: none;
            stroke: #e0e0e0;
            stroke-width: 3;
            stroke-dasharray: 5, 5;
        }

        .pipeline-path.active {
            stroke: #667eea;
            stroke-dasharray: none;
            animation: pulseStroke 1s infinite;
        }

        @keyframes pulseStroke {
            0%, 100% { stroke-width: 3; }
            50% { stroke-width: 5; }
        }

        /* å³ä¾§ä¿¡æ¯é¢æ¿ */
        .info-panel {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            max-height: 85vh;
            overflow-y: auto;
        }

        .info-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }

        .info-tab {
            padding: 10px 20px;
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
            position: relative;
        }

        .info-tab:hover {
            color: #2a5298;
        }

        .info-tab.active {
            color: #667eea;
            font-weight: 600;
        }

        .info-tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: #667eea;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* ä»£ç å—æ ·å¼ */
        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.5;
            margin: 10px 0;
        }

        .code-block .keyword {
            color: #569cd6;
        }

        .code-block .string {
            color: #ce9178;
        }

        .code-block .comment {
            color: #6a9955;
        }

        .code-block .function {
            color: #dcdcaa;
        }

        /* å¯¹æ¯”è¡¨æ ¼ */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 10px;
            text-align: left;
            border: 1px solid #e0e0e0;
        }

        .comparison-table th {
            background: #f8f9fa;
            color: #2a5298;
            font-weight: 600;
        }

        .comparison-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .comparison-table .check {
            color: #28a745;
        }

        .comparison-table .cross {
            color: #dc3545;
        }

        /* å‘é‡ç©ºé—´å¯è§†åŒ– */
        .vector-space-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            text-align: center;
        }

        .vector-canvas {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            margin: 10px auto;
        }

        /* æ€§èƒ½æŒ‡æ ‡ */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .metric-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }

        .metric-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #2a5298;
        }

        .metric-label {
            font-size: 0.85em;
            color: #666;
            margin-top: 5px;
        }

        /* èŠ‚ç‚¹è¯¦æƒ…å¼¹çª— */
        .node-detail-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            z-index: 1000;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .node-detail-modal.active {
            display: block;
        }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }

        .modal-overlay.active {
            display: block;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
        }

        .modal-header h3 {
            color: #2a5298;
            font-size: 1.3em;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5em;
            color: #666;
            cursor: pointer;
            transition: color 0.3s;
        }

        .modal-close:hover {
            color: #dc3545;
        }

        /* ç±»æ¯”è¯´æ˜æ¡† */
        .analogy-box {
            background: #fffbf0;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
        }

        .analogy-box h5 {
            color: #856404;
            margin-bottom: 10px;
        }

        .analogy-box .analogy-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 8px 0;
        }

        .analogy-box .icon {
            font-size: 1.5em;
        }

        /* è¿›åº¦æ¡ */
        .progress-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1600px) {
            .main-layout {
                grid-template-columns: 280px 1fr 350px;
            }
        }

        @media (max-width: 1200px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
            
            .control-panel,
            .info-panel {
                max-height: none;
            }
        }

        /* æç¤ºæ¡† */
        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 12px;
            border-radius: 8px;
            font-size: 0.9em;
            max-width: 300px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
            line-height: 1.4;
        }

        .tooltip.show {
            opacity: 1;
        }

        /* æŒ‰é’®æ ·å¼ */
        .btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-success {
            background: #28a745;
        }

        /* æ·±åº¦è§£é‡Šé¢æ¿ */
        .deep-explanation {
            background: #f0f8ff;
            border: 2px solid #2a5298;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .deep-explanation h4 {
            color: #2a5298;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .explanation-section {
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
        }

        .explanation-section h5 {
            color: #667eea;
            margin-bottom: 10px;
        }

        /* åŠ è½½åŠ¨ç”» */
        .spinner {
            border: 3px solid #f3f3f3;
            border-radius: 50%;
            border-top: 3px solid #667eea;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ RAGç³»ç»ŸV2.0æ¶æ„ - æ·±åº¦äº¤äº’å¼å­¦ä¹ å¹³å°</h1>
            <p>ç‚¹å‡»æ¯ä¸ªç»„ä»¶æ·±å…¥äº†è§£åŸç†ã€æŸ¥çœ‹ä»£ç ã€è§‚å¯Ÿè¿è¡ŒçŠ¶æ€</p>
            <div class="features">
                <span>ğŸ“š æ·±åº¦æ•™å­¦</span>
                <span>ğŸ” å‘é‡è¯­ä¹‰æœç´¢</span>
                <span>ğŸ¤– åŒæ¨¡å‹æ¶æ„</span>
                <span>ğŸ’» çœŸå®ä»£ç å±•ç¤º</span>
                <span>âš¡ å®æ—¶æ•°æ®æµ</span>
            </div>
        </div>

        <div class="main-layout">
            <!-- å·¦ä¾§æ§åˆ¶é¢æ¿ -->
            <div class="control-panel">
                <div class="control-section">
                    <h3>ğŸ® ç³»ç»Ÿæ¨¡å¼</h3>
                    <div class="mode-selector">
                        <button class="mode-btn active" onclick="switchMode('dev')">
                            ğŸ› ï¸ å¼€å‘æ€ - ç³»ç»Ÿé…ç½®
                            <div class="subtitle">ç†è§£ç»„ä»¶åˆå§‹åŒ–åŸç†</div>
                        </button>
                        <button class="mode-btn" onclick="switchMode('manage')">
                            ğŸ“‹ ç®¡ç†æ€ - æ–‡æ¡£å¤„ç†
                            <div class="subtitle">å­¦ä¹ å‘é‡åŒ–è¿‡ç¨‹</div>
                        </button>
                        <button class="mode-btn" onclick="switchMode('runtime')">
                            ğŸš€ è¿è¡Œæ€ - æŸ¥è¯¢å¤„ç†
                            <div class="subtitle">ä½“éªŒå®Œæ•´æ•°æ®æµ</div>
                        </button>
                    </div>
                </div>

                <!-- æ·±åº¦å­¦ä¹ ï¼šå‘é‡æ•°æ®åº“ vs ä¼ ç»Ÿæ•°æ®åº“ -->
                <div class="learning-card">
                    <h4>ğŸ“ ä¸ºä»€ä¹ˆç”¨å‘é‡æ•°æ®åº“ï¼Ÿ</h4>
                    <div class="concept-box">
                        <strong>ä¼ ç»Ÿæ•°æ®åº“çš„å±€é™ï¼š</strong>
                        åªèƒ½ç²¾ç¡®åŒ¹é…å…³é”®è¯ï¼Œæ— æ³•ç†è§£è¯­ä¹‰
                    </div>
                    <div class="concept-box">
                        <strong>å‘é‡æ•°æ®åº“çš„ä¼˜åŠ¿ï¼š</strong>
                        ç†è§£"æ„æ€ç›¸è¿‘"çš„å†…å®¹ï¼Œæ”¯æŒè¯­ä¹‰æœç´¢
                    </div>
                    <div class="analogy-box">
                        <h5>ğŸ’¡ ç”Ÿæ´»ç±»æ¯”</h5>
                        <div class="analogy-item">
                            <span class="icon">ğŸ“š</span>
                            <span>ä¼ ç»ŸDB = å›¾ä¹¦é¦†ä¹¦åç´¢å¼•</span>
                        </div>
                        <div class="analogy-item">
                            <span class="icon">ğŸ§ </span>
                            <span>å‘é‡DB = å›¾ä¹¦ç®¡ç†å‘˜çš„çŸ¥è¯†</span>
                        </div>
                    </div>
                </div>

                <!-- æŸ¥è¯¢ç¤ºä¾‹å¯¹æ¯” -->
                <div class="control-section">
                    <h3>ğŸ” æŸ¥è¯¢å¯¹æ¯”æ¼”ç¤º</h3>
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>æŸ¥è¯¢</th>
                                <th>ä¼ ç»ŸDB</th>
                                <th>å‘é‡DB</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>"Python"</td>
                                <td class="check">âœ… æ‰¾åˆ°</td>
                                <td class="check">âœ… æ‰¾åˆ°æ›´å¤š</td>
                            </tr>
                            <tr>
                                <td>"æ´¾æ£®"</td>
                                <td class="cross">âŒ æ‰¾ä¸åˆ°</td>
                                <td class="check">âœ… ç†è§£åŒä¹‰</td>
                            </tr>
                            <tr>
                                <td>"å¦‚ä½•å®šä¹‰å‡½æ•°"</td>
                                <td class="cross">âŒ éœ€è¦ç²¾ç¡®</td>
                                <td class="check">âœ… è¯­ä¹‰ç†è§£</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- æ€§èƒ½æŒ‡æ ‡ -->
                <div class="control-section">
                    <h3>ğŸ“Š ç³»ç»ŸçŠ¶æ€</h3>
                    <div class="metrics-grid">
                        <div class="metric-item">
                            <div class="metric-value" id="time-metric">0.0s</div>
                            <div class="metric-label">å¤„ç†æ—¶é—´</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value" id="docs-metric">0</div>
                            <div class="metric-label">æ–‡æ¡£æ•°</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value" id="vectors-metric">0</div>
                            <div class="metric-label">å‘é‡ç»´åº¦</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value" id="similarity-metric">0%</div>
                            <div class="metric-label">ç›¸ä¼¼åº¦</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ä¸­é—´æµç¨‹å¯è§†åŒ– -->
            <div class="flow-visualization">
                <div class="stage-title" id="stage-title">ğŸ› ï¸ å¼€å‘æ€ - ç³»ç»Ÿåˆå§‹åŒ–</div>
                
                <!-- å¼€å‘æ€å¯è§†åŒ– -->
                <div id="dev-flow" class="flow-content">
                    <svg class="pipeline-svg" viewBox="0 0 900 600" style="width: 100%; height: 500px;">
                        <!-- é…ç½®è¯»å–èŠ‚ç‚¹ -->
                        <g class="node-group" onclick="showNodeDetail('config')">
                            <rect x="50" y="50" width="150" height="80" rx="10" 
                                  class="flow-node clickable" id="config-node"/>
                            <text x="125" y="85" class="node-text">ğŸ“„ é…ç½®è¯»å–</text>
                            <text x="125" y="105" class="node-text" style="font-size: 10px;">.envæ–‡ä»¶</text>
                        </g>
                        
                        <!-- å‘é‡æ•°æ®åº“èŠ‚ç‚¹ - å¯ç‚¹å‡»äº†è§£æ·±åº¦åŸç† -->
                        <g class="node-group" onclick="showNodeDetail('vectordb')">
                            <rect x="250" y="50" width="150" height="80" rx="10" 
                                  class="flow-node clickable" id="vectordb-node"/>
                            <text x="325" y="85" class="node-text">ğŸ—„ï¸ å‘é‡æ•°æ®åº“</text>
                            <text x="325" y="105" class="node-text" style="font-size: 10px;">ChromaDB</text>
                        </g>
                        
                        <!-- åµŒå…¥æ¨¡å‹èŠ‚ç‚¹ - å¯ç‚¹å‡»äº†è§£MiniLM-L6 -->
                        <g class="node-group" onclick="showNodeDetail('embedding')">
                            <rect x="450" y="50" width="150" height="80" rx="10" 
                                  class="flow-node clickable" id="embedding-node"/>
                            <text x="525" y="85" class="node-text">ğŸ”¢ åµŒå…¥æ¨¡å‹</text>
                            <text x="525" y="105" class="node-text" style="font-size: 10px;">MiniLM-L6</text>
                        </g>
                        
                        <!-- AIæ¨¡å‹é…ç½®èŠ‚ç‚¹ -->
                        <g class="node-group" onclick="showNodeDetail('ai-config')">
                            <rect x="150" y="200" width="150" height="80" rx="10" 
                                  class="flow-node clickable" id="ai-config-node"/>
                            <text x="225" y="235" class="node-text">ğŸ¤– AIæ¨¡å‹é…ç½®</text>
                            <text x="225" y="255" class="node-text" style="font-size: 10px;">DeepSeekåŒæ¨¡å‹</text>
                        </g>
                        
                        <!-- æ™ºèƒ½è·¯ç”±å™¨èŠ‚ç‚¹ - å¯ç‚¹å‡»äº†è§£è·¯ç”±å†³ç­– -->
                        <g class="node-group" onclick="showNodeDetail('router')">
                            <rect x="350" y="200" width="150" height="80" rx="10" 
                                  class="flow-node clickable" id="router-node"/>
                            <text x="425" y="235" class="node-text">ğŸš¦ æ™ºèƒ½è·¯ç”±å™¨</text>
                            <text x="425" y="255" class="node-text" style="font-size: 10px;">ä»»åŠ¡åˆ†å‘</text>
                        </g>
                        
                        <!-- è¿æ¥çº¿ -->
                        <path d="M200,90 L250,90" class="pipeline-path" id="path1"/>
                        <path d="M400,90 L450,90" class="pipeline-path" id="path2"/>
                        <path d="M325,130 L325,170 L225,170 L225,200" class="pipeline-path" id="path3"/>
                        <path d="M300,240 L350,240" class="pipeline-path" id="path4"/>
                        
                        <!-- ç‚¹å‡»æç¤º -->
                        <text x="450" y="350" style="fill: #667eea; font-size: 14px; text-anchor: middle;">
                            ğŸ’¡ ç‚¹å‡»ä»»æ„ç»„ä»¶æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
                        </text>
                    </svg>
                    
                    <!-- MiniLM-L6æ·±åº¦è§£é‡Š -->
                    <div class="deep-explanation">
                        <h4>ğŸ”¬ MiniLM-L6æ¨¡å‹ï¼šæ–‡æœ¬å¦‚ä½•å˜æˆå‘é‡ï¼Ÿ</h4>
                        <div class="explanation-section">
                            <h5>1ï¸âƒ£ åˆ†è¯ï¼ˆTokenizationï¼‰</h5>
                            <p>"Pythonç¼–ç¨‹åŸºç¡€" â†’ ["Python", "ç¼–ç¨‹", "åŸºç¡€"]</p>
                        </div>
                        <div class="explanation-section">
                            <h5>2ï¸âƒ£ ç¼–ç ï¼ˆEncodingï¼‰</h5>
                            <p>["Python", "ç¼–ç¨‹", "åŸºç¡€"] â†’ [101, 2348, 1523, 102]</p>
                        </div>
                        <div class="explanation-section">
                            <h5>3ï¸âƒ£ åµŒå…¥ï¼ˆEmbeddingï¼‰</h5>
                            <p>[101, 2348, 1523, 102] â†’ [0.23, -0.45, 0.67, ...] (384ç»´)</p>
                        </div>
                        <div class="code-block">
<span class="comment"># å®é™…Pythonä»£ç </span>
<span class="keyword">from</span> sentence_transformers <span class="keyword">import</span> SentenceTransformer

<span class="comment"># åŠ è½½æ¨¡å‹ï¼ˆä»…25MBï¼Œè½»é‡é«˜æ•ˆï¼‰</span>
model = SentenceTransformer(<span class="string">'all-MiniLM-L6-v2'</span>)

<span class="comment"># æ–‡æœ¬è½¬å‘é‡</span>
text = <span class="string">"Pythonç¼–ç¨‹åŸºç¡€"</span>
vector = model.encode(text)  <span class="comment"># è¿”å›384ç»´å‘é‡</span>
<span class="keyword">print</span>(f<span class="string">"å‘é‡ç»´åº¦: {len(vector)}"</span>)  <span class="comment"># è¾“å‡º: 384</span>
                        </div>
                    </div>
                </div>

                <!-- ç®¡ç†æ€å¯è§†åŒ– -->
                <div id="manage-flow" class="flow-content" style="display: none;">
                    <svg class="pipeline-svg" viewBox="0 0 900 600" style="width: 100%; height: 500px;">
                        <!-- æ–‡æ¡£å¤„ç†æµç¨‹èŠ‚ç‚¹ -->
                        <g class="node-group" onclick="showNodeDetail('doc-input')">
                            <rect x="50" y="50" width="150" height="80" rx="10" 
                                  class="flow-node clickable" id="doc-input-node"/>
                            <text x="125" y="85" class="node-text">ğŸ“¥ æ–‡æ¡£è¾“å…¥</text>
                            <text x="125" y="105" class="node-text" style="font-size: 10px;">MD/PDF/TXT</text>
                        </g>
                        
                        <g class="node-group" onclick="showNodeDetail('doc-parse')">
                            <rect x="250" y="50" width="150" height="80" rx="10" 
                                  class="flow-node clickable" id="doc-parse-node"/>
                            <text x="325" y="85" class="node-text">ğŸ” æ–‡æ¡£è§£æ</text>
                            <text x="325" y="105" class="node-text" style="font-size: 10px;">æå–å†…å®¹</text>
                        </g>
                        
                        <g class="node-group" onclick="showNodeDetail('chunk')">
                            <rect x="450" y="50" width="150" height="80" rx="10" 
                                  class="flow-node clickable" id="chunk-node"/>
                            <text x="525" y="85" class="node-text">âœ‚ï¸ æ–‡æœ¬åˆ†å—</text>
                            <text x="525" y="105" class="node-text" style="font-size: 10px;">500å­—ç¬¦/å—</text>
                        </g>
                        
                        <g class="node-group" onclick="showNodeDetail('vectorize')">
                            <rect x="650" y="50" width="150" height="80" rx="10" 
                                  class="flow-node clickable" id="vectorize-node"/>
                            <text x="725" y="85" class="node-text">ğŸ”¢ å‘é‡åŒ–</text>
                            <text x="725" y="105" class="node-text" style="font-size: 10px;">384ç»´å‘é‡</text>
                        </g>
                        
                        <g class="node-group" onclick="showNodeDetail('store')">
                            <rect x="350" y="250" width="150" height="80" rx="10" 
                                  class="flow-node clickable" id="store-node"/>
                            <text x="425" y="285" class="node-text">ğŸ’¾ æ•°æ®å­˜å‚¨</text>
                            <text x="425" y="305" class="node-text" style="font-size: 10px;">ChromaDB</text>
                        </g>
                        
                        <!-- è¿æ¥çº¿ -->
                        <path d="M200,90 L250,90" class="pipeline-path"/>
                        <path d="M400,90 L450,90" class="pipeline-path"/>
                        <path d="M600,90 L650,90" class="pipeline-path"/>
                        <path d="M725,130 L725,190 L425,190 L425,250" class="pipeline-path"/>
                    </svg>
                    
                    <!-- åˆ†å—ç­–ç•¥è§£é‡Š -->
                    <div class="deep-explanation">
                        <h4>ğŸ“ ä¸ºä»€ä¹ˆè¦åˆ†å—ï¼Ÿå¦‚ä½•åˆ†å—ï¼Ÿ</h4>
                        <div class="explanation-section">
                            <h5>ä¸ºä»€ä¹ˆåˆ†å—ï¼Ÿ</h5>
                            <ul>
                                <li>æ¨¡å‹è¾“å…¥é•¿åº¦é™åˆ¶ï¼ˆMiniLM-L6æœ€å¤§256 tokensï¼‰</li>
                                <li>æé«˜æœç´¢ç²¾åº¦ï¼ˆå°å—æ›´å®¹æ˜“åŒ¹é…ï¼‰</li>
                                <li>ä¼˜åŒ–å­˜å‚¨å’Œæ£€ç´¢æ•ˆç‡</li>
                            </ul>
                        </div>
                        <div class="explanation-section">
                            <h5>åˆ†å—ç­–ç•¥</h5>
                            <p><strong>å—å¤§å°ï¼š</strong>500å­—ç¬¦</p>
                            <p><strong>é‡å ï¼š</strong>100å­—ç¬¦</p>
                            <p><strong>åŸå› ï¼š</strong>ä¿æŒä¸Šä¸‹æ–‡è¿è´¯æ€§</p>
                        </div>
                        <div class="code-block">
<span class="comment"># æ–‡æ¡£åˆ†å—å®ç°</span>
<span class="keyword">def</span> <span class="function">chunk_text</span>(text, chunk_size=<span class="number">500</span>, overlap=<span class="number">100</span>):
    chunks = []
    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(text), chunk_size - overlap):
        chunk = text[i:i + chunk_size]
        chunks.append(chunk)
    <span class="keyword">return</span> chunks

<span class="comment"># ç¤ºä¾‹</span>
text = <span class="string">"Pythonæ˜¯ä¸€ç§é«˜çº§ç¼–ç¨‹è¯­è¨€..."</span> * <span class="number">100</span>
chunks = chunk_text(text)
<span class="keyword">print</span>(f<span class="string">"æ–‡æ¡£è¢«åˆ†æˆ {len(chunks)} å—"</span>)
                        </div>
                    </div>
                </div>

                <!-- è¿è¡Œæ€å¯è§†åŒ– -->
                <div id="runtime-flow" class="flow-content" style="display: none;">
                    <!-- å®Œæ•´çš„V2.0è¯·æ±‚å¤„ç†æµç¨‹ -->
                    <div class="deep-explanation">
                        <h4>ğŸš€ V2.0åŒæ¨¡å‹æ™ºèƒ½è·¯ç”±æ¶æ„</h4>
                        <div class="explanation-section">
                            <h5>ğŸ¤– DeepSeek-V3ï¼šå·¥å…·è°ƒç”¨ä¸“å®¶</h5>
                            <p>ä¸“é—¨å¤„ç†éœ€è¦è°ƒç”¨æœç´¢ã€æ•°æ®åº“ç­‰å·¥å…·çš„ä»»åŠ¡</p>
                        </div>
                        <div class="explanation-section">
                            <h5>ğŸ§  DeepSeek-R1ï¼šæ¨ç†åˆ†æä¸“å®¶</h5>
                            <p>ä¸“é—¨å¤„ç†éœ€è¦æ·±åº¦æ€è€ƒå’Œé€»è¾‘æ¨ç†çš„ä»»åŠ¡</p>
                        </div>
                        <div class="explanation-section">
                            <h5>ğŸš¦ æ™ºèƒ½è·¯ç”±å†³ç­–</h5>
                            <p>æ ¹æ®æŸ¥è¯¢ç±»å‹è‡ªåŠ¨é€‰æ‹©æœ€åˆé€‚çš„æ¨¡å‹</p>
                        </div>
                    </div>
                    
                    <svg class="pipeline-svg" viewBox="0 0 1000 800" style="width: 100%; height: 700px;">
                        <!-- å®Œæ•´çš„11æ­¥æµç¨‹ -->
                        
                        <!-- Step 1: ç”¨æˆ·è¾“å…¥ -->
                        <g class="node-group" onclick="showRuntimeNodeDetail('user-input')">
                            <rect x="50" y="50" width="120" height="60" rx="10" 
                                  class="flow-node clickable" id="user-input-node"/>
                            <text x="110" y="75" class="node-text">ğŸ” ç”¨æˆ·è¾“å…¥</text>
                            <text x="110" y="95" class="node-text" style="font-size: 10px;">æŸ¥è¯¢é—®é¢˜</text>
                        </g>
                        
                        <!-- Step 2: APIæ¥æ”¶ -->
                        <g class="node-group" onclick="showRuntimeNodeDetail('api-receive')">
                            <rect x="220" y="50" width="120" height="60" rx="10" 
                                  class="flow-node clickable" id="api-receive-node"/>
                            <text x="280" y="75" class="node-text">ğŸŒ APIæ¥æ”¶</text>
                            <text x="280" y="95" class="node-text" style="font-size: 10px;">FastAPI</text>
                        </g>
                        
                        <!-- Step 3: ä¼šè¯ç®¡ç† -->
                        <g class="node-group" onclick="showRuntimeNodeDetail('session-mgmt')">
                            <rect x="390" y="50" width="120" height="60" rx="10" 
                                  class="flow-node clickable" id="session-mgmt-node"/>
                            <text x="450" y="75" class="node-text">ğŸ“‹ ä¼šè¯ç®¡ç†</text>
                            <text x="450" y="95" class="node-text" style="font-size: 10px;">ä¸Šä¸‹æ–‡</text>
                        </g>
                        
                        <!-- Step 4: å·¥å…·å‡†å¤‡ -->
                        <g class="node-group" onclick="showRuntimeNodeDetail('tool-prep')">
                            <rect x="560" y="50" width="120" height="60" rx="10" 
                                  class="flow-node clickable" id="tool-prep-node"/>
                            <text x="620" y="75" class="node-text">ğŸ”§ å·¥å…·å‡†å¤‡</text>
                            <text x="620" y="95" class="node-text" style="font-size: 10px;">æ ¼å¼è½¬æ¢</text>
                        </g>
                        
                        <!-- Step 5: è·¯ç”±å†³ç­– (æ ¸å¿ƒ) -->
                        <g class="node-group" onclick="showRuntimeNodeDetail('router-decision')">
                            <rect x="350" y="180" width="180" height="70" rx="10" 
                                  class="flow-node clickable" id="router-decision-node"
                                  style="fill: #fff3cd; stroke: #ffc107; stroke-width: 3;"/>
                            <text x="440" y="210" class="node-text" style="font-weight: bold;">ğŸš¦ è·¯ç”±å†³ç­–</text>
                            <text x="440" y="230" class="node-text" style="font-size: 10px;">æ™ºèƒ½åˆ¤æ–­</text>
                        </g>
                        
                        <!-- å·¦åˆ†æ”¯: å·¥å…·è°ƒç”¨è·¯å¾„ -->
                        <!-- Step 6: V3æ¨¡å‹ -->
                        <g class="node-group" onclick="showRuntimeNodeDetail('model-v3')">
                            <rect x="150" y="320" width="140" height="60" rx="10" 
                                  class="flow-node clickable" id="model-v3-node"
                                  style="fill: #e8f5e8; stroke: #28a745;"/>
                            <text x="220" y="345" class="node-text">ğŸ”§ DeepSeek-V3</text>
                            <text x="220" y="365" class="node-text" style="font-size: 10px;">å·¥å…·è°ƒç”¨</text>
                        </g>
                        
                        <!-- Step 7: å·¥å…·è°ƒç”¨ -->
                        <g class="node-group" onclick="showRuntimeNodeDetail('tool-call')">
                            <rect x="150" y="420" width="140" height="60" rx="10" 
                                  class="flow-node clickable" id="tool-call-node"/>
                            <text x="220" y="445" class="node-text">ğŸ› ï¸ å·¥å…·è°ƒç”¨</text>
                            <text x="220" y="465" class="node-text" style="font-size: 10px;">search_course</text>
                        </g>
                        
                        <!-- Step 8: å‘é‡æœç´¢ -->
                        <g class="node-group" onclick="showRuntimeNodeDetail('vector-search')">
                            <rect x="150" y="520" width="140" height="60" rx="10" 
                                  class="flow-node clickable" id="vector-search-node"/>
                            <text x="220" y="545" class="node-text">ğŸ” å‘é‡æœç´¢</text>
                            <text x="220" y="565" class="node-text" style="font-size: 10px;">ChromaDB</text>
                        </g>
                        
                        <!-- å³åˆ†æ”¯: ç›´æ¥æ¨ç†è·¯å¾„ -->
                        <!-- R1ç›´æ¥å¤„ç† -->
                        <g class="node-group" onclick="showRuntimeNodeDetail('model-r1-direct')">
                            <rect x="590" y="320" width="140" height="60" rx="10" 
                                  class="flow-node clickable" id="model-r1-direct-node"
                                  style="fill: #ffe8e8; stroke: #dc3545;"/>
                            <text x="660" y="345" class="node-text">ğŸ§  DeepSeek-R1</text>
                            <text x="660" y="365" class="node-text" style="font-size: 10px;">ç›´æ¥æ¨ç†</text>
                        </g>
                        
                        <!-- Step 9: æ¨¡å‹åˆ‡æ¢ -->
                        <g class="node-group" onclick="showRuntimeNodeDetail('model-switch')">
                            <rect x="350" y="420" width="180" height="60" rx="10" 
                                  class="flow-node clickable" id="model-switch-node"
                                  style="fill: #f0f4ff; stroke: #667eea; stroke-width: 2;"/>
                            <text x="440" y="445" class="node-text">ğŸ”„ æ¨¡å‹åˆ‡æ¢</text>
                            <text x="440" y="465" class="node-text" style="font-size: 10px;">V3 â†’ R1</text>
                        </g>
                        
                        <!-- Step 10: ç»“æœæ•´åˆ -->
                        <g class="node-group" onclick="showRuntimeNodeDetail('result-integrate')">
                            <rect x="350" y="520" width="180" height="60" rx="10" 
                                  class="flow-node clickable" id="result-integrate-node"
                                  style="fill: #ffe8e8; stroke: #dc3545;"/>
                            <text x="440" y="545" class="node-text">ğŸ§© ç»“æœæ•´åˆ</text>
                            <text x="440" y="565" class="node-text" style="font-size: 10px;">R1å¤„ç†</text>
                        </g>
                        
                        <!-- Step 11: æœ€ç»ˆå“åº” -->
                        <g class="node-group" onclick="showRuntimeNodeDetail('final-response')">
                            <rect x="350" y="620" width="180" height="60" rx="10" 
                                  class="flow-node clickable" id="final-response-node"
                                  style="fill: #d4edda; stroke: #28a745; stroke-width: 3;"/>
                            <text x="440" y="645" class="node-text" style="font-weight: bold;">ğŸ“¤ æœ€ç»ˆå“åº”</text>
                            <text x="440" y="665" class="node-text" style="font-size: 10px;">è¿”å›ç­”æ¡ˆ</text>
                        </g>
                        
                        <!-- è¿æ¥çº¿ - ä¸»æµç¨‹ -->
                        <path d="M170,80 L220,80" class="pipeline-path"/>
                        <path d="M340,80 L390,80" class="pipeline-path"/>
                        <path d="M510,80 L560,80" class="pipeline-path"/>
                        <path d="M620,110 L620,150 L440,150 L440,180" class="pipeline-path"/>
                        
                        <!-- å·¦åˆ†æ”¯è¿çº¿ (å·¥å…·è·¯å¾„) -->
                        <path d="M350,215 L220,215 L220,320" class="pipeline-path" id="tool-path"
                              style="stroke: #28a745; stroke-dasharray: 10,5;"/>
                        <path d="M220,380 L220,420" class="pipeline-path" style="stroke: #28a745;"/>
                        <path d="M220,480 L220,520" class="pipeline-path" style="stroke: #28a745;"/>
                        <path d="M290,550 L350,550" class="pipeline-path" style="stroke: #28a745;"/>
                        
                        <!-- å³åˆ†æ”¯è¿çº¿ (ç›´æ¥è·¯å¾„) -->
                        <path d="M530,215 L660,215 L660,320" class="pipeline-path" id="direct-path"
                              style="stroke: #dc3545; stroke-dasharray: 10,5;"/>
                        <path d="M660,380 L660,450 L530,450" class="pipeline-path" style="stroke: #dc3545;"/>
                        
                        <!-- æ¨¡å‹åˆ‡æ¢è¿çº¿ -->
                        <path d="M290,350 L350,350 L350,420" class="pipeline-path" 
                              style="stroke: #667eea; stroke-width: 2;"/>
                        <path d="M440,480 L440,520" class="pipeline-path" style="stroke: #dc3545;"/>
                        <path d="M440,580 L440,620" class="pipeline-path" style="stroke: #28a745;"/>
                        
                        <!-- æ ‡æ³¨æ–‡å­— -->
                        <text x="250" y="200" style="fill: #28a745; font-size: 12px;">éœ€è¦æœç´¢</text>
                        <text x="550" y="200" style="fill: #dc3545; font-size: 12px;">ç›´æ¥å›ç­”</text>
                        <text x="320" y="400" style="fill: #667eea; font-size: 12px;">åˆ‡æ¢æ¨¡å‹</text>
                        
                        <!-- ç‚¹å‡»æç¤º -->
                        <text x="500" y="750" style="fill: #667eea; font-size: 14px; text-anchor: middle;">
                            ğŸ’¡ ç‚¹å‡»ä»»æ„èŠ‚ç‚¹æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
                        </text>
                    </svg>
                </div>
            </div>

            <!-- å³ä¾§ä¿¡æ¯é¢æ¿ -->
            <div class="info-panel">
                <div class="info-tabs">
                    <button class="info-tab active" onclick="switchInfoTab('concept')">
                        ğŸ“š æ¦‚å¿µåŸç†
                    </button>
                    <button class="info-tab" onclick="switchInfoTab('code')">
                        ğŸ’» ä»£ç å®ç°
                    </button>
                    <button class="info-tab" onclick="switchInfoTab('runtime')">
                        ğŸš€ è¿è¡ŒçŠ¶æ€
                    </button>
                </div>

                <!-- æ¦‚å¿µåŸç†æ ‡ç­¾é¡µ -->
                <div id="concept-tab" class="tab-content active">
                    <h3>ğŸ“š æ ¸å¿ƒæ¦‚å¿µ</h3>
                    <div class="learning-card">
                        <h4>å‘é‡æ•°æ®åº“ vs ä¼ ç»Ÿæ•°æ®åº“</h4>
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>ç‰¹æ€§</th>
                                    <th>ä¼ ç»Ÿæ•°æ®åº“</th>
                                    <th>å‘é‡æ•°æ®åº“</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>æœç´¢æ–¹å¼</td>
                                    <td>å…³é”®è¯åŒ¹é…</td>
                                    <td>è¯­ä¹‰ç†è§£</td>
                                </tr>
                                <tr>
                                    <td>æŸ¥è¯¢è¯­è¨€</td>
                                    <td>SQL</td>
                                    <td>å‘é‡ç›¸ä¼¼åº¦</td>
                                </tr>
                                <tr>
                                    <td>æ•°æ®æ ¼å¼</td>
                                    <td>ç»“æ„åŒ–è¡¨æ ¼</td>
                                    <td>é«˜ç»´å‘é‡</td>
                                </tr>
                                <tr>
                                    <td>é€‚ç”¨åœºæ™¯</td>
                                    <td>ç²¾ç¡®æŸ¥è¯¢</td>
                                    <td>ç›¸ä¼¼æ€§æœç´¢</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- å‘é‡ç©ºé—´å¯è§†åŒ– -->
                    <div class="vector-space-container">
                        <h4>ğŸŒŒ å‘é‡ç©ºé—´å¯è§†åŒ–</h4>
                        <canvas id="vector-canvas" class="vector-canvas" width="350" height="300"></canvas>
                        <p style="margin-top: 10px; font-size: 0.9em; color: #666;">
                            çº¢ç‚¹ï¼šæŸ¥è¯¢å‘é‡ | è“ç‚¹ï¼šæ–‡æ¡£å‘é‡ | ç»¿çº¿ï¼šç›¸ä¼¼åº¦è¿æ¥
                        </p>
                    </div>
                </div>

                <!-- ä»£ç å®ç°æ ‡ç­¾é¡µ -->
                <div id="code-tab" class="tab-content">
                    <h3>ğŸ’» ä»£ç å®ç°</h3>
                    <div id="code-display">
                        <p style="color: #666; text-align: center; padding: 20px;">
                            ç‚¹å‡»å·¦ä¾§æµç¨‹å›¾ä¸­çš„ç»„ä»¶æŸ¥çœ‹å¯¹åº”ä»£ç 
                        </p>
                    </div>
                </div>

                <!-- è¿è¡ŒçŠ¶æ€æ ‡ç­¾é¡µ -->
                <div id="runtime-tab" class="tab-content">
                    <h3>ğŸš€ è¿è¡ŒçŠ¶æ€</h3>
                    <div id="runtime-display">
                        <div class="metrics-grid">
                            <div class="metric-item">
                                <div class="metric-value">ğŸŸ¢</div>
                                <div class="metric-label">ç³»ç»ŸçŠ¶æ€</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value">0ms</div>
                                <div class="metric-label">å“åº”æ—¶é—´</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value">0MB</div>
                                <div class="metric-label">å†…å­˜ä½¿ç”¨</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value">0%</div>
                                <div class="metric-label">CPUä½¿ç”¨</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <h4 style="color: #2a5298; margin-bottom: 10px;">ğŸ“ è¿è¡Œæ—¥å¿—</h4>
                            <div id="runtime-log" style="font-family: monospace; font-size: 0.9em; color: #666;">
                                [ç³»ç»Ÿ] ç­‰å¾…æ“ä½œ...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- èŠ‚ç‚¹è¯¦æƒ…å¼¹çª— -->
        <div class="modal-overlay" onclick="closeNodeDetail()"></div>
        <div class="node-detail-modal" id="node-detail-modal">
            <div class="modal-header">
                <h3 id="modal-title">ç»„ä»¶è¯¦æƒ…</h3>
                <button class="modal-close" onclick="closeNodeDetail()">âœ•</button>
            </div>
            <div id="modal-content">
                <!-- åŠ¨æ€å†…å®¹ -->
            </div>
        </div>

        <!-- åº•éƒ¨æ§åˆ¶æ  -->
        <div style="background: white; border-radius: 15px; padding: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin-top: 20px;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <button class="btn" onclick="startDemo()">â–¶ï¸ å¼€å§‹æ¼”ç¤º</button>
                    <button class="btn btn-secondary" onclick="resetDemo()">ğŸ”„ é‡ç½®</button>
                </div>
                <div class="progress-bar" style="flex: 1; margin: 0 20px;">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div style="color: #666;">
                    <span id="status-text">å‡†å¤‡å°±ç»ª</span>
                </div>
            </div>
        </div>
    </div>

    <!-- æç¤ºæ¡† -->
    <div class="tooltip" id="tooltip"></div>

    <script>
        // å…¨å±€çŠ¶æ€ç®¡ç†
        let currentMode = 'dev';
        let isProcessing = false;
        let currentStep = 0;
        
        // èŠ‚ç‚¹è¯¦ç»†ä¿¡æ¯æ•°æ®
        const nodeDetails = {
            'config': {
                title: 'ğŸ“„ ç¯å¢ƒé…ç½®',
                concept: {
                    why: 'ç³»ç»Ÿéœ€è¦çŸ¥é“å¦‚ä½•è¿æ¥å„ä¸ªæœåŠ¡å’ŒAPI',
                    what: 'ä».envæ–‡ä»¶è¯»å–é…ç½®å‚æ•°',
                    how: 'ä½¿ç”¨python-dotenvåº“åŠ è½½ç¯å¢ƒå˜é‡'
                },
                code: `<span class="comment"># backend/config.py</span>
<span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseSettings

<span class="keyword">class</span> <span class="function">Config</span>(BaseSettings):
    <span class="comment"># AIæ¨¡å‹é…ç½®</span>
    LLM_PROVIDER: str = <span class="string">"deepseek"</span>
    LLM_API_KEY: str
    LLM_BASE_URL: str
    
    <span class="comment"># åŒæ¨¡å‹é…ç½®</span>
    MODEL_REASON: str = <span class="string">"DeepSeek-R1"</span>
    MODEL_TOOLCALL: str = <span class="string">"DeepSeek-V3"</span>
    
    <span class="comment"># å‘é‡æ•°æ®åº“é…ç½®</span>
    CHROMA_PATH: str = <span class="string">"./chroma_db"</span>
    EMBEDDING_MODEL: str = <span class="string">"all-MiniLM-L6-v2"</span>
    
    <span class="keyword">class</span> Config:
        env_file = <span class="string">".env"</span>`,
                runtime: {
                    status: 'å·²åŠ è½½',
                    configs: {
                        'APIæä¾›å•†': 'DeepSeek',
                        'å‘é‡æ•°æ®åº“': 'ChromaDB',
                        'åµŒå…¥æ¨¡å‹': 'MiniLM-L6'
                    }
                }
            },
            'vectordb': {
                title: 'ğŸ—„ï¸ å‘é‡æ•°æ®åº“',
                concept: {
                    why: 'ä¼ ç»Ÿæ•°æ®åº“æ— æ³•ç†è§£"Python"å’Œ"æ´¾æ£®"æ˜¯åŒä¸€ä¸ªæ„æ€',
                    what: 'ChromaDBæ˜¯ä¸“é—¨å­˜å‚¨å’Œæ£€ç´¢å‘é‡çš„æ•°æ®åº“',
                    how: 'é€šè¿‡è®¡ç®—å‘é‡ä¹‹é—´çš„ä½™å¼¦ç›¸ä¼¼åº¦æ‰¾åˆ°è¯­ä¹‰ç›¸è¿‘çš„å†…å®¹'
                },
                code: `<span class="comment"># backend/vector_store.py</span>
<span class="keyword">import</span> chromadb
<span class="keyword">from</span> chromadb.config <span class="keyword">import</span> Settings

<span class="keyword">class</span> <span class="function">VectorStore</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self, chroma_path: str):
        <span class="comment"># åˆå§‹åŒ–ChromaDBå®¢æˆ·ç«¯</span>
        self.client = chromadb.PersistentClient(
            path=chroma_path,
            settings=Settings(anonymized_telemetry=<span class="keyword">False</span>)
        )
        
    <span class="keyword">def</span> <span class="function">search</span>(self, query: str, k: int = <span class="number">5</span>):
        <span class="comment"># å°†æŸ¥è¯¢è½¬æ¢ä¸ºå‘é‡</span>
        query_vector = self.embed(query)
        
        <span class="comment"># ä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦æœç´¢</span>
        results = self.collection.query(
            query_embeddings=[query_vector],
            n_results=k
        )
        <span class="keyword">return</span> results`,
                runtime: {
                    status: 'è¿è¡Œä¸­',
                    metrics: {
                        'å­˜å‚¨æ–‡æ¡£': 1250,
                        'å‘é‡ç»´åº¦': 384,
                        'æŸ¥è¯¢å»¶è¿Ÿ': '45ms'
                    }
                }
            },
            'embedding': {
                title: 'ğŸ”¢ åµŒå…¥æ¨¡å‹',
                concept: {
                    why: 'è®¡ç®—æœºä¸èƒ½ç›´æ¥ç†è§£æ–‡å­—ï¼Œéœ€è¦è½¬æ¢æˆæ•°å­—',
                    what: 'MiniLM-L6å°†æ–‡æœ¬è½¬æ¢ä¸º384ç»´å‘é‡',
                    how: 'é€šè¿‡æ·±åº¦å­¦ä¹ æ¨¡å‹ç¼–ç è¯­ä¹‰ä¿¡æ¯'
                },
                code: `<span class="comment"># ä¸ºä»€ä¹ˆé€‰æ‹©MiniLM-L6ï¼Ÿ</span>
<span class="comment"># 1. æ¨¡å‹å°å·§ï¼šä»…25MBï¼ˆBERTéœ€è¦420MBï¼‰</span>
<span class="comment"># 2. é€Ÿåº¦å¿«ï¼šæ¨ç†é€Ÿåº¦æ˜¯BERTçš„5å€</span>
<span class="comment"># 3. å¤šè¯­è¨€ï¼šæ”¯æŒä¸­è‹±æ–‡ç­‰å¤šç§è¯­è¨€</span>
<span class="comment"># 4. æ•ˆæœå¥½ï¼šåœ¨è¯­ä¹‰ç›¸ä¼¼åº¦ä»»åŠ¡ä¸Šè¡¨ç°ä¼˜ç§€</span>

<span class="keyword">from</span> sentence_transformers <span class="keyword">import</span> SentenceTransformer

<span class="comment"># åŠ è½½æ¨¡å‹</span>
model = SentenceTransformer(<span class="string">'all-MiniLM-L6-v2'</span>)

<span class="comment"># æ–‡æœ¬è½¬å‘é‡ç¤ºä¾‹</span>
texts = [
    <span class="string">"Pythonæ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€"</span>,
    <span class="string">"æ´¾æ£®æ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€"</span>,
    <span class="string">"Javaæ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€"</span>
]

vectors = model.encode(texts)
<span class="comment"># vectors.shape = (3, 384)</span>

<span class="comment"># è®¡ç®—ç›¸ä¼¼åº¦</span>
<span class="keyword">from</span> sklearn.metrics.pairwise <span class="keyword">import</span> cosine_similarity
sim_matrix = cosine_similarity(vectors)
<span class="comment"># Python vs æ´¾æ£®: 0.95 (é«˜ç›¸ä¼¼åº¦)</span>
<span class="comment"># Python vs Java: 0.72 (ä¸­ç­‰ç›¸ä¼¼åº¦)</span>`,
                runtime: {
                    status: 'å·²åŠ è½½',
                    metrics: {
                        'æ¨¡å‹å¤§å°': '25MB',
                        'å‘é‡ç»´åº¦': 384,
                        'ç¼–ç é€Ÿåº¦': '1000å¥/ç§’'
                    }
                }
            },
            'ai-config': {
                title: 'ğŸ¤– AIæ¨¡å‹é…ç½®',
                concept: {
                    why: 'ä¸åŒä»»åŠ¡éœ€è¦ä¸åŒèƒ½åŠ›çš„æ¨¡å‹',
                    what: 'DeepSeekåŒæ¨¡å‹æ¶æ„ï¼šV3å¤„ç†å·¥å…·è°ƒç”¨ï¼ŒR1å¤„ç†æ¨ç†',
                    how: 'æ ¹æ®ä»»åŠ¡ç±»å‹æ™ºèƒ½è·¯ç”±åˆ°åˆé€‚çš„æ¨¡å‹'
                },
                code: `<span class="comment"># backend/ai_generator.py</span>
<span class="keyword">class</span> <span class="function">AIGenerator</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self):
        <span class="comment"># åŒæ¨¡å‹é…ç½®</span>
        self.model_reason = <span class="string">"DeepSeek-R1"</span>  <span class="comment"># æ¨ç†ä¸“ç”¨</span>
        self.model_toolcall = <span class="string">"DeepSeek-V3"</span>  <span class="comment"># å·¥å…·è°ƒç”¨ä¸“ç”¨</span>
        
    <span class="keyword">def</span> <span class="function">route_query</span>(self, query: str, has_tools: bool):
        <span class="comment"># æ™ºèƒ½è·¯ç”±å†³ç­–</span>
        <span class="keyword">if</span> has_tools and self._needs_search(query):
            <span class="comment"># éœ€è¦æœç´¢è¯¾ç¨‹å†…å®¹</span>
            <span class="keyword">return</span> self.model_toolcall  <span class="comment"># ä½¿ç”¨V3</span>
        <span class="keyword">else</span>:
            <span class="comment"># ä¸€èˆ¬çŸ¥è¯†é—®ç­”</span>
            <span class="keyword">return</span> self.model_reason  <span class="comment"># ä½¿ç”¨R1</span>
            
    <span class="keyword">def</span> <span class="function">_needs_search</span>(self, query: str):
        <span class="comment"># åˆ¤æ–­æ˜¯å¦éœ€è¦æœç´¢</span>
        keywords = [<span class="string">"è¯¾ç¨‹"</span>, <span class="string">"ç« èŠ‚"</span>, <span class="string">"å†…å®¹"</span>, <span class="string">"å­¦ä¹ "</span>]
        <span class="keyword">return</span> any(kw <span class="keyword">in</span> query <span class="keyword">for</span> kw <span class="keyword">in</span> keywords)`,
                runtime: {
                    status: 'å·²é…ç½®',
                    metrics: {
                        'R1æ¨¡å‹': 'æ¨ç†ä»»åŠ¡',
                        'V3æ¨¡å‹': 'å·¥å…·è°ƒç”¨',
                        'é™çº§æ–¹æ¡ˆ': 'Claude API'
                    }
                }
            },
            'router': {
                title: 'ğŸš¦ æ™ºèƒ½è·¯ç”±å™¨',
                concept: {
                    why: 'ä¸åŒæŸ¥è¯¢éœ€è¦ä¸åŒçš„å¤„ç†ç­–ç•¥',
                    what: 'åˆ†ææŸ¥è¯¢æ„å›¾ï¼Œé€‰æ‹©æœ€åˆé€‚çš„å¤„ç†è·¯å¾„',
                    how: 'åŸºäºè§„åˆ™å’Œæ¨¡å¼åŒ¹é…è¿›è¡Œå†³ç­–'
                },
                code: `<span class="comment"># è·¯ç”±å†³ç­–æ ‘</span>
<span class="keyword">def</span> <span class="function">intelligent_routing</span>(query: str, context: dict):
    <span class="comment">"""
    æ™ºèƒ½è·¯ç”±å†³ç­–æµç¨‹
    
    å†³ç­–å› ç´ ï¼š
    1. æŸ¥è¯¢ç±»å‹ï¼ˆè¯¾ç¨‹å†…å®¹ vs é€šç”¨çŸ¥è¯†ï¼‰
    2. æ˜¯å¦éœ€è¦å·¥å…·è°ƒç”¨
    3. ä¸Šä¸‹æ–‡ä¿¡æ¯
    4. ç³»ç»Ÿè´Ÿè½½
    """</span>
    
    <span class="comment"># Step 1: åˆ†ææŸ¥è¯¢ç±»å‹</span>
    query_type = analyze_query(query)
    
    <span class="comment"># Step 2: å†³ç­–è·¯ç”±</span>
    <span class="keyword">if</span> query_type == <span class="string">"course_content"</span>:
        <span class="comment"># éœ€è¦æœç´¢è¯¾ç¨‹ææ–™</span>
        model = <span class="string">"DeepSeek-V3"</span>
        tools = [<span class="string">"search_course"</span>]
        path = <span class="string">"tool_calling_path"</span>
    <span class="keyword">elif</span> query_type == <span class="string">"general_knowledge"</span>:
        <span class="comment"># é€šç”¨çŸ¥è¯†é—®ç­”</span>
        model = <span class="string">"DeepSeek-R1"</span>
        tools = []
        path = <span class="string">"direct_reasoning_path"</span>
    <span class="keyword">else</span>:
        <span class="comment"># æ··åˆå‹æŸ¥è¯¢</span>
        model = <span class="string">"DeepSeek-V3"</span>
        tools = [<span class="string">"search_course"</span>]
        path = <span class="string">"hybrid_path"</span>
        
    <span class="keyword">return</span> {
        <span class="string">"model"</span>: model,
        <span class="string">"tools"</span>: tools,
        <span class="string">"path"</span>: path
    }`,
                runtime: {
                    status: 'å°±ç»ª',
                    metrics: {
                        'è·¯ç”±ç­–ç•¥': 'åŸºäºä»»åŠ¡',
                        'æ¨¡å‹æ± ': 2,
                        'é™çº§æ”¯æŒ': 'æ˜¯'
                    }
                }
            }
        };

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            initializeVectorVisualization();
            addTooltips();
            updateMetrics();
        });

        // åˆ‡æ¢æ¨¡å¼
        function switchMode(mode) {
            if (isProcessing) return;
            
            currentMode = mode;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // æ›´æ–°æµç¨‹å›¾
            document.querySelectorAll('.flow-content').forEach(content => {
                content.style.display = 'none';
            });
            document.getElementById(mode + '-flow').style.display = 'block';
            
            // æ›´æ–°æ ‡é¢˜
            const titles = {
                'dev': 'ğŸ› ï¸ å¼€å‘æ€ - ç³»ç»Ÿåˆå§‹åŒ–',
                'manage': 'ğŸ“‹ ç®¡ç†æ€ - æ–‡æ¡£å¤„ç†',
                'runtime': 'ğŸš€ è¿è¡Œæ€ - æŸ¥è¯¢å¤„ç†'
            };
            document.getElementById('stage-title').textContent = titles[mode];
            
            // é‡ç½®èŠ‚ç‚¹çŠ¶æ€
            resetNodes();
            
            // æ·»åŠ æ—¥å¿—
            addLog(`åˆ‡æ¢åˆ°${titles[mode]}`);
        }

        // åˆ‡æ¢ä¿¡æ¯é¢æ¿æ ‡ç­¾
        function switchInfoTab(tab) {
            // æ›´æ–°æ ‡ç­¾çŠ¶æ€
            document.querySelectorAll('.info-tab').forEach(t => {
                t.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // æ›´æ–°å†…å®¹
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tab + '-tab').classList.add('active');
        }

        // æ˜¾ç¤ºèŠ‚ç‚¹è¯¦æƒ…
        function showNodeDetail(nodeId) {
            const detail = nodeDetails[nodeId];
            if (!detail) return;
            
            const modal = document.getElementById('node-detail-modal');
            const overlay = document.querySelector('.modal-overlay');
            const modalTitle = document.getElementById('modal-title');
            const modalContent = document.getElementById('modal-content');
            
            modalTitle.textContent = detail.title;
            
            modalContent.innerHTML = `
                <div class="info-tabs">
                    <button class="info-tab active" onclick="switchModalTab('concept')">ğŸ“š æ¦‚å¿µåŸç†</button>
                    <button class="info-tab" onclick="switchModalTab('code')">ğŸ’» ä»£ç å®ç°</button>
                    <button class="info-tab" onclick="switchModalTab('runtime')">ğŸš€ è¿è¡ŒçŠ¶æ€</button>
                </div>
                
                <div id="modal-concept" class="tab-content active">
                    <div class="concept-box">
                        <strong>Whyï¼ˆä¸ºä»€ä¹ˆï¼‰ï¼š</strong>
                        ${detail.concept.why}
                    </div>
                    <div class="concept-box">
                        <strong>Whatï¼ˆæ˜¯ä»€ä¹ˆï¼‰ï¼š</strong>
                        ${detail.concept.what}
                    </div>
                    <div class="concept-box">
                        <strong>Howï¼ˆæ€ä¹ˆåšï¼‰ï¼š</strong>
                        ${detail.concept.how}
                    </div>
                </div>
                
                <div id="modal-code" class="tab-content" style="display: none;">
                    <div class="code-block">${detail.code}</div>
                </div>
                
                <div id="modal-runtime" class="tab-content" style="display: none;">
                    <div class="metrics-grid">
                        ${Object.entries(detail.runtime.metrics || {}).map(([key, value]) => `
                            <div class="metric-item">
                                <div class="metric-value">${value}</div>
                                <div class="metric-label">${key}</div>
                            </div>
                        `).join('')}
                    </div>
                    <div style="margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                        <strong>çŠ¶æ€ï¼š</strong> ${detail.runtime.status}
                    </div>
                </div>
            `;
            
            modal.classList.add('active');
            overlay.classList.add('active');
            
            // é«˜äº®å¯¹åº”èŠ‚ç‚¹
            document.getElementById(nodeId + '-node').classList.add('active');
        }

        // å…³é—­èŠ‚ç‚¹è¯¦æƒ…
        function closeNodeDetail() {
            document.getElementById('node-detail-modal').classList.remove('active');
            document.querySelector('.modal-overlay').classList.remove('active');
            
            // ç§»é™¤èŠ‚ç‚¹é«˜äº®
            document.querySelectorAll('.flow-node').forEach(node => {
                node.classList.remove('active');
            });
        }

        // åˆ‡æ¢å¼¹çª—æ ‡ç­¾
        function switchModalTab(tab) {
            document.querySelectorAll('#node-detail-modal .info-tab').forEach(t => {
                t.classList.remove('active');
            });
            event.target.classList.add('active');
            
            document.querySelectorAll('#node-detail-modal .tab-content').forEach(content => {
                content.style.display = 'none';
            });
            document.getElementById('modal-' + tab).style.display = 'block';
        }

        // åˆå§‹åŒ–å‘é‡ç©ºé—´å¯è§†åŒ–
        function initializeVectorVisualization() {
            const canvas = document.getElementById('vector-canvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            // æ¸…ç©ºç”»å¸ƒ
            ctx.clearRect(0, 0, width, height);
            
            // ç»˜åˆ¶åæ ‡è½´
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(width/2, 0);
            ctx.lineTo(width/2, height);
            ctx.moveTo(0, height/2);
            ctx.lineTo(width, height/2);
            ctx.stroke();
            
            // æ¨¡æ‹Ÿæ–‡æ¡£å‘é‡ï¼ˆè“ç‚¹ï¼‰
            const docVectors = [
                {x: 100, y: 80, label: 'PythonåŸºç¡€'},
                {x: 120, y: 100, label: 'ç¼–ç¨‹å…¥é—¨'},
                {x: 200, y: 150, label: 'Javaæ•™ç¨‹'},
                {x: 250, y: 200, label: 'æ•°æ®åº“'},
                {x: 150, y: 120, label: 'å‡½æ•°å®šä¹‰'}
            ];
            
            // ç»˜åˆ¶æ–‡æ¡£å‘é‡
            docVectors.forEach(vec => {
                ctx.fillStyle = '#667eea';
                ctx.beginPath();
                ctx.arc(vec.x, vec.y, 5, 0, 2 * Math.PI);
                ctx.fill();
                
                // æ ‡ç­¾
                ctx.fillStyle = '#666';
                ctx.font = '10px sans-serif';
                ctx.fillText(vec.label, vec.x + 8, vec.y + 3);
            });
            
            // æŸ¥è¯¢å‘é‡ï¼ˆçº¢ç‚¹ï¼‰
            const queryVector = {x: 110, y: 90, label: 'æŸ¥è¯¢ï¼šPython'};
            ctx.fillStyle = '#ff6b6b';
            ctx.beginPath();
            ctx.arc(queryVector.x, queryVector.y, 8, 0, 2 * Math.PI);
            ctx.fill();
            
            // ç»˜åˆ¶ç›¸ä¼¼åº¦è¿çº¿ï¼ˆç»¿çº¿ï¼‰
            ctx.strokeStyle = '#28a745';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            
            // è¿æ¥æœ€ç›¸ä¼¼çš„æ–‡æ¡£
            [docVectors[0], docVectors[1], docVectors[4]].forEach(vec => {
                ctx.beginPath();
                ctx.moveTo(queryVector.x, queryVector.y);
                ctx.lineTo(vec.x, vec.y);
                ctx.stroke();
            });
            
            // é‡ç½®çº¿æ¡æ ·å¼
            ctx.setLineDash([]);
        }

        // å¼€å§‹æ¼”ç¤º
        function startDemo() {
            if (isProcessing) return;
            
            isProcessing = true;
            currentStep = 0;
            
            document.getElementById('status-text').textContent = 'æ¼”ç¤ºè¿›è¡Œä¸­...';
            
            // æ ¹æ®å½“å‰æ¨¡å¼è¿è¡Œä¸åŒçš„æ¼”ç¤º
            if (currentMode === 'dev') {
                runDevDemo();
            } else if (currentMode === 'manage') {
                runManageDemo();
            } else if (currentMode === 'runtime') {
                runRuntimeDemo();
            }
        }

        // å¼€å‘æ€æ¼”ç¤º
        function runDevDemo() {
            const steps = [
                {node: 'config-node', delay: 500},
                {node: 'vectordb-node', delay: 800},
                {node: 'embedding-node', delay: 600},
                {node: 'ai-config-node', delay: 700},
                {node: 'router-node', delay: 900}
            ];
            
            runSteps(steps);
        }

        // ç®¡ç†æ€æ¼”ç¤º
        function runManageDemo() {
            const steps = [
                {node: 'doc-input-node', delay: 500},
                {node: 'doc-parse-node', delay: 800},
                {node: 'chunk-node', delay: 1000},
                {node: 'vectorize-node', delay: 1200},
                {node: 'store-node', delay: 600}
            ];
            
            runSteps(steps);
        }

        // è¿è¡Œæ€æ¼”ç¤º
        function runRuntimeDemo() {
            const steps = [
                {node: 'user-input-node', delay: 300, log: 'æ¥æ”¶ç”¨æˆ·æŸ¥è¯¢'},
                {node: 'api-receive-node', delay: 400, log: 'FastAPIæ¥æ”¶è¯·æ±‚'},
                {node: 'session-mgmt-node', delay: 500, log: 'è·å–ä¼šè¯å†å²'},
                {node: 'tool-prep-node', delay: 600, log: 'å‡†å¤‡å·¥å…·å®šä¹‰'},
                {node: 'router-decision-node', delay: 800, log: 'ğŸš¦ æ™ºèƒ½è·¯ç”±å†³ç­–ï¼šéœ€è¦å·¥å…·è°ƒç”¨'},
                {node: 'model-v3-node', delay: 700, log: 'é€‰æ‹©DeepSeek-V3å¤„ç†å·¥å…·è°ƒç”¨'},
                {node: 'tool-call-node', delay: 900, log: 'æ‰§è¡Œsearch_courseå·¥å…·'},
                {node: 'vector-search-node', delay: 1000, log: 'å‘é‡æ•°æ®åº“æœç´¢å®Œæˆ'},
                {node: 'model-switch-node', delay: 800, log: 'ğŸ”„ æ¨¡å‹åˆ‡æ¢ï¼šV3 â†’ R1'},
                {node: 'result-integrate-node', delay: 1200, log: 'R1æ¨¡å‹æ•´åˆæœç´¢ç»“æœ'},
                {node: 'final-response-node', delay: 600, log: 'âœ… ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆ'}
            ];
            
            addLog('å¼€å§‹V2.0åŒæ¨¡å‹å¤„ç†æµç¨‹');
            runSteps(steps);
        }
        
        // æ˜¾ç¤ºè¿è¡Œæ€èŠ‚ç‚¹è¯¦æƒ…
        function showRuntimeNodeDetail(nodeId) {
            // è¿™é‡Œå¯ä»¥æ·»åŠ è¿è¡Œæ€èŠ‚ç‚¹çš„è¯¦ç»†ä¿¡æ¯
            showNodeDetail(nodeId);
        }

        // æ‰§è¡Œæ­¥éª¤
        function runSteps(steps) {
            let index = 0;
            
            function processNext() {
                if (index >= steps.length) {
                    isProcessing = false;
                    document.getElementById('status-text').textContent = 'æ¼”ç¤ºå®Œæˆ';
                    updateProgress(100);
                    return;
                }
                
                const step = steps[index];
                const node = document.getElementById(step.node);
                
                if (node) {
                    // æ¿€æ´»èŠ‚ç‚¹
                    node.classList.add('active');
                    
                    // æ›´æ–°è¿›åº¦
                    updateProgress((index + 1) / steps.length * 100);
                    
                    // æ·»åŠ æ—¥å¿—
                    addLog(`å¤„ç†ï¼š${step.node.replace('-node', '')}`);
                }
                
                // æ ‡è®°ä¸ºå®Œæˆå¹¶ç»§ç»­
                setTimeout(() => {
                    if (node) {
                        node.classList.remove('active');
                        node.classList.add('completed');
                    }
                    index++;
                    processNext();
                }, step.delay);
            }
            
            processNext();
        }

        // é‡ç½®æ¼”ç¤º
        function resetDemo() {
            isProcessing = false;
            currentStep = 0;
            
            // é‡ç½®æ‰€æœ‰èŠ‚ç‚¹
            resetNodes();
            
            // é‡ç½®è¿›åº¦
            updateProgress(0);
            
            // é‡ç½®çŠ¶æ€
            document.getElementById('status-text').textContent = 'å‡†å¤‡å°±ç»ª';
            
            // æ¸…ç©ºæ—¥å¿—
            document.getElementById('runtime-log').innerHTML = '[ç³»ç»Ÿ] å·²é‡ç½®';
        }

        // é‡ç½®èŠ‚ç‚¹çŠ¶æ€
        function resetNodes() {
            document.querySelectorAll('.flow-node').forEach(node => {
                node.classList.remove('active', 'completed');
            });
            document.querySelectorAll('.pipeline-path').forEach(path => {
                path.classList.remove('active');
            });
        }

        // æ›´æ–°è¿›åº¦æ¡
        function updateProgress(percent) {
            document.getElementById('progress-fill').style.width = percent + '%';
        }

        // æ›´æ–°æŒ‡æ ‡
        function updateMetrics() {
            document.getElementById('time-metric').textContent = '0.0s';
            document.getElementById('docs-metric').textContent = '0';
            document.getElementById('vectors-metric').textContent = '384';
            document.getElementById('similarity-metric').textContent = '0%';
        }

        // æ·»åŠ æ—¥å¿—
        function addLog(message) {
            const logEl = document.getElementById('runtime-log');
            const time = new Date().toLocaleTimeString();
            const logEntry = `[${time}] ${message}\n`;
            logEl.textContent = logEntry + logEl.textContent;
            
            // é™åˆ¶æ—¥å¿—é•¿åº¦
            const lines = logEl.textContent.split('\n');
            if (lines.length > 10) {
                logEl.textContent = lines.slice(0, 10).join('\n');
            }
        }

        // æ·»åŠ æç¤º
        function addTooltips() {
            // è¿™é‡Œå¯ä»¥æ·»åŠ æ›´å¤šäº¤äº’æç¤º
        }
    </script>
</body>
</html>